const ct=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}).compare,Ce=1/0,Le=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ve="eexxaacctt",ft="A-Z",ut="a-z",ae=(e,t,n)=>e.replace(ft,t).replace(ut,n),ve={unicode:!1,alpha:null,interSplit:"[^A-Za-z\\d']+",intraSplit:"[a-z][A-Z]",intraBound:"[A-Za-z]\\d|\\d[A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:Ce,intraChars:"[a-z\\d']",intraIns:null,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,Ce],intraSub:null,intraTrn:null,intraDel:null,intraFilt:(e,t,n)=>!0,sort:(e,t,n)=>{let{idx:r,chars:i,terms:s,interLft2:o,interLft1:D,start:p,intraIns:b,interIns:k}=e;return r.map((P,B)=>B).sort((P,B)=>i[B]-i[P]||b[P]-b[B]||s[B]+o[B]+.5*D[B]-(s[P]+o[P]+.5*D[P])||k[P]-k[B]||p[P]-p[B]||ct(t[r[P]],t[r[B]]))}},De=(e,t)=>t==0?"":t==1?e+"??":t==Ce?e+"*?":e+`{0,${t}}?`,$e="(?:\\b|_)";function se(e){e=Object.assign({},ve,e);let{unicode:t,interLft:n,interRgt:r,intraMode:i,intraSlice:s,intraIns:o,intraSub:D,intraTrn:p,intraDel:b,intraContr:k,intraSplit:P,interSplit:B,intraBound:fe,intraChars:ne}=e;o??(o=i),D??(D=i),p??(p=i),b??(b=i);let pe=e.letters??e.alpha;if(pe!=null){let l=pe.toLocaleUpperCase(),f=pe.toLocaleLowerCase();B=ae(B,l,f),P=ae(P,l,f),fe=ae(fe,l,f),ne=ae(ne,l,f),k=ae(k,l,f)}let $=t?"u":"";const je='".+?"',Ye=new RegExp(je,"gi"+$),Fe=new RegExp(`(?:\\s+|^)-(?:${ne}+|${je})`,"gi"+$);let{intraRules:Ie}=e;Ie==null&&(Ie=l=>{let f=ve.intraSlice,I=0,g=0,h=0,u=0;if(/[^\d]/.test(l)){let w=l.length;w<=4?w>=3&&(h=Math.min(p,1),w==4&&(I=Math.min(o,1))):(f=s,I=o,g=D,h=p,u=b)}return{intraSlice:f,intraIns:I,intraSub:g,intraTrn:h,intraDel:u}});let et=!!P,tt=new RegExp(P,"g"+$),nt=new RegExp(B,"g"+$),rt=new RegExp("^"+B+"|"+B+"$","g"+$),it=new RegExp(k,"gi"+$);const ue=l=>{let f=[];l=l.replace(Ye,g=>(f.push(g),Ve)),l=l.replace(rt,"").toLocaleLowerCase(),et&&(l=l.replace(tt,g=>g[0]+" "+g[1]));let I=0;return l.split(nt).filter(g=>g!="").map(g=>g===Ve?f[I++]:g)},lt=/[^\d]+|\d+/g,we=(l,f=0,I=!1)=>{let g=ue(l);if(g.length==0)return[];let h=Array(g.length).fill("");g=g.map((m,d)=>m.replace(it,_=>(h[d]=_,"")));let u;if(i==1)u=g.map((m,d)=>{if(m[0]==='"')return Le(m.slice(1,-1));let _="";for(let y of m.matchAll(lt)){let c=y[0],{intraSlice:a,intraIns:R,intraSub:E,intraTrn:L,intraDel:S}=Ie(c);if(R+E+L+S==0)_+=c+h[d];else{let[V,re]=a,W=c.slice(0,V),Q=c.slice(re),T=c.slice(V,re);R==1&&W.length==1&&W!=T[0]&&(W+="(?!"+W+")");let Y=T.length,H=[c];if(E)for(let x=0;x<Y;x++)H.push(W+T.slice(0,x)+ne+T.slice(x+1)+Q);if(L)for(let x=0;x<Y-1;x++)T[x]!=T[x+1]&&H.push(W+T.slice(0,x)+T[x+1]+T[x]+T.slice(x+2)+Q);if(S)for(let x=0;x<Y;x++)H.push(W+T.slice(0,x+1)+"?"+T.slice(x+1)+Q);if(R){let x=De(ne,1);for(let v=0;v<Y;v++)H.push(W+T.slice(0,v)+x+T.slice(v)+Q)}_+="(?:"+H.join("|")+")"+h[d]}}return _});else{let m=De(ne,o);f==2&&o>0&&(m=")("+m+")("),u=g.map((d,_)=>d[0]==='"'?Le(d.slice(1,-1)):d.split("").map((y,c,a)=>(o==1&&c==0&&a.length>1&&y!=a[c+1]&&(y+="(?!"+y+")"),y)).join(m)+h[_])}let w=n==2?$e:"",N=r==2?$e:"",K=N+De(e.interChars,e.interIns)+w;return f>0?I?u=w+"("+u.join(")"+N+"|"+w+"(")+")"+N:(u="("+u.join(")("+K+")(")+")",u="(.??"+w+")"+u+"("+N+".*)"):(u=u.join(K),u=w+u+N),[new RegExp(u,"i"+$),g,h]},he=(l,f,I)=>{let[g]=we(f);if(g==null)return null;let h=[];if(I!=null)for(let u=0;u<I.length;u++){let w=I[u];g.test(l[w])&&h.push(w)}else for(let u=0;u<l.length;u++)g.test(l[u])&&h.push(u);return h};let Pe=!!fe,me=new RegExp(B,$),Ee=new RegExp(fe,$);const ze=(l,f,I)=>{let[g,h,u]=we(I,1),[w]=we(I,2),N=h.length,K=l.length,m=Array(K).fill(0),d={idx:Array(K),start:m.slice(),chars:m.slice(),terms:m.slice(),interIns:m.slice(),intraIns:m.slice(),interLft2:m.slice(),interRgt2:m.slice(),interLft1:m.slice(),interRgt1:m.slice(),ranges:Array(K)},_=n==1||r==1,y=0;for(let c=0;c<l.length;c++){let a=f[l[c]],R=a.match(g),E=R.index+R[1].length,L=E,S=!1,V=0,re=0,W=0,Q=0,T=0,Y=0,H=0,x=0,v=[];for(let C=0,A=2;C<N;C++,A+=2){let J=R[A].toLocaleLowerCase(),G=h[C],U=G[0]=='"'?G.slice(1,-1):G+u[C],z=U.length,O=J.length,j=J==U;if(!j&&R[A+1].length>=z){let M=R[A+1].toLocaleLowerCase().indexOf(U);M>-1&&(v.push(L,O,M,z),L+=xe(R,A,M,z),J=U,O=z,j=!0,C==0&&(E=L))}if(_||j){let M=L-1,q=L+O,F=!1,oe=!1;if(M==-1||me.test(a[M]))j&&V++,F=!0;else{if(n==2){S=!0;break}if(Pe&&Ee.test(a[M]+a[M+1]))j&&re++,F=!0;else if(n==1){let ge=R[A+1],ie=L+O;if(ge.length>=z){let ee=0,le=!1,at=new RegExp(U,"ig"+$),Oe;for(;Oe=at.exec(ge);){ee=Oe.index;let Ne=ie+ee,ye=Ne-1;if(ye==-1||me.test(a[ye])){V++,le=!0;break}else if(Ee.test(a[ye]+a[Ne])){re++,le=!0;break}}le&&(F=!0,v.push(L,O,ee,z),L+=xe(R,A,ee,z),J=U,O=z,j=!0,C==0&&(E=L))}if(!F){S=!0;break}}}if(q==a.length||me.test(a[q]))j&&W++,oe=!0;else{if(r==2){S=!0;break}if(Pe&&Ee.test(a[q-1]+a[q]))j&&Q++,oe=!0;else if(r==1){S=!0;break}}j&&(T+=z,F&&oe&&Y++)}if(O>z&&(x+=O-z),C>0&&(H+=R[A-1].length),!e.intraFilt(U,J,L)){S=!0;break}C<N-1&&(L+=O+R[A+1].length)}if(!S){d.idx[y]=l[c],d.interLft2[y]=V,d.interLft1[y]=re,d.interRgt2[y]=W,d.interRgt1[y]=Q,d.chars[y]=T,d.terms[y]=Y,d.interIns[y]=H,d.intraIns[y]=x,d.start[y]=E;let C=a.match(w),A=C.index+C[1].length,J=v.length,G=J>0?0:1/0,U=J-4;for(let M=2;M<C.length;){let q=C[M].length;if(G<=U&&v[G]==A){let F=v[G+1],oe=v[G+2],ge=v[G+3],ie=M,ee="";for(let le=0;le<F;ie++)ee+=C[ie],le+=C[ie].length;C.splice(M,ie-M,ee),A+=xe(C,M,oe,ge),G+=4}else A+=q,M++}A=C.index+C[1].length;let z=d.ranges[y]=[],O=A,j=A;for(let M=2;M<C.length;M++){let q=C[M].length;A+=q,M%2==0?j=A:q>0&&(z.push(O,j),O=j=A)}j>O&&z.push(O,j),y++}}if(y<l.length)for(let c in d)d[c]=d[c].slice(0,y);return d},xe=(l,f,I,g)=>{let h=l[f]+l[f+1].slice(0,I);return l[f-1]+=h,l[f]=l[f+1].slice(I,I+g),l[f+1]=l[f+1].slice(I+g),h.length},st=5,ot=(l,f,I,g=1e3,h)=>{I=I?I===!0?st:I:0;let u=null,w=null,N=[];f=f.replace(Fe,c=>{let a=c.trim().slice(1);return a[0]==='"'&&(a=Le(a.slice(1,-1))),N.push(a),""});let K=ue(f),m;if(N.length>0){if(m=new RegExp(N.join("|"),"i"+$),K.length==0){let c=[];for(let a=0;a<l.length;a++)m.test(l[a])||c.push(a);return[c,null,null]}}else if(K.length==0)return[null,null,null];if(I>0){let c=ue(f);if(c.length>1){let a=c.slice().sort((E,L)=>L.length-E.length);for(let E=0;E<a.length;E++){if((h==null?void 0:h.length)==0)return[[],null,null];h=he(l,a[E],h)}if(c.length>I)return[h,null,null];u=Je(c).map(E=>E.join(" ")),w=[];let R=new Set;for(let E=0;E<u.length;E++)if(R.size<h.length){let L=h.filter(V=>!R.has(V)),S=he(l,u[E],L);for(let V=0;V<S.length;V++)R.add(S[V]);w.push(S)}else w.push([])}}u==null&&(u=[f],w=[(h==null?void 0:h.length)>0?h:he(l,f)]);let d=null,_=null;if(N.length>0&&(w=w.map(c=>c.filter(a=>!m.test(l[a])))),w.reduce((c,a)=>c+a.length,0)<=g){d={},_=[];for(let c=0;c<w.length;c++){let a=w[c];if(a==null||a.length==0)continue;let R=u[c],E=ze(a,l,R),L=e.sort(E,l,R);if(c>0)for(let S=0;S<L.length;S++)L[S]+=_.length;for(let S in E)d[S]=(d[S]??[]).concat(E[S]);_=_.concat(L)}}return[[].concat(...w),d,_]};return{search:(...l)=>ot(...l),split:ue,filter:he,info:ze,sort:e.sort}}const ht=(()=>{let e={A:"ÁÀÃÂÄĄ",a:"áàãâäą",E:"ÉÈÊËĖ",e:"éèêëę",I:"ÍÌÎÏĮ",i:"íìîïį",O:"ÓÒÔÕÖ",o:"óòôõö",U:"ÚÙÛÜŪŲ",u:"úùûüūų",C:"ÇČĆ",c:"çčć",L:"Ł",l:"ł",N:"ÑŃ",n:"ñń",S:"ŠŚ",s:"šś",Z:"ŻŹ",z:"żź"},t=new Map,n="";for(let s in e)e[s].split("").forEach(o=>{n+=o,t.set(o,s)});let r=new RegExp(`[${n}]`,"g"),i=s=>t.get(s);return s=>{if(typeof s=="string")return s.replace(r,i);let o=Array(s.length);for(let D=0;D<s.length;D++)o[D]=s[D].replace(r,i);return o}})();function Je(e){e=e.slice();let t=e.length,n=[e.slice()],r=new Array(t).fill(0),i=1,s,o;for(;i<t;)r[i]<i?(s=i%2&&r[i],o=e[i],e[i]=e[s],e[s]=o,++r[i],i=1,n.push(e.slice())):(r[i]=0,++i);return n}const gt=(e,t)=>t?`<mark>${e}</mark>`:e,dt=(e,t)=>e+t;function pt(e,t,n=gt,r="",i=dt){r=i(r,n(e.substring(0,t[0]),!1))??r;for(let s=0;s<t.length;s+=2){let o=t[s],D=t[s+1];r=i(r,n(e.substring(o,D),!0))??r,s<t.length-3&&(r=i(r,n(e.substring(t[s+1],t[s+2]),!1))??r)}return r=i(r,n(e.substring(t[t.length-1]),!1))??r,r}se.latinize=ht;se.permute=e=>Je([...Array(e.length).keys()]).sort((n,r)=>{for(let i=0;i<n.length;i++)if(n[i]!=r[i])return n[i]-r[i];return 0}).map(n=>n.map(r=>e[r]));se.highlight=pt;const Me=(e,t)=>t.some(n=>e instanceof n);let We,Ze;function It(){return We||(We=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wt(){return Ze||(Ze=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ae=new WeakMap,Re=new WeakMap,de=new WeakMap;function mt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(X(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return de.set(t,e),t}function Et(e){if(Ae.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Ae.set(e,t)}let be={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ae.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return X(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Xe(e){be=e(be)}function xt(e){return wt().includes(e)?function(...t){return e.apply(Be(this),t),X(this.request)}:function(...t){return X(e.apply(Be(this),t))}}function yt(e){return typeof e=="function"?xt(e):(e instanceof IDBTransaction&&Et(e),Me(e,It())?new Proxy(e,be):e)}function X(e){if(e instanceof IDBRequest)return mt(e);if(Re.has(e))return Re.get(e);const t=yt(e);return t!==e&&(Re.set(e,t),de.set(t,e)),t}const Be=e=>de.get(e);function Lt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),D=X(o);return r&&o.addEventListener("upgradeneeded",p=>{r(X(o.result),p.oldVersion,p.newVersion,X(o.transaction),p)}),n&&o.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),D.then(p=>{s&&p.addEventListener("close",()=>s()),i&&p.addEventListener("versionchange",b=>i(b.oldVersion,b.newVersion,b))}).catch(()=>{}),D}function Dt(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",r=>t(r.oldVersion,r)),X(n).then(()=>{})}const Rt=["get","getKey","getAll","getAllKeys","count"],St=["put","add","delete","clear"],Se=new Map;function Ge(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Se.get(t))return Se.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=St.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Rt.includes(n)))return;const s=async function(o,...D){const p=this.transaction(o,i?"readwrite":"readonly");let b=p.store;return r&&(b=b.index(D.shift())),(await Promise.all([b[n](...D),i&&p.done]))[0]};return Se.set(t,s),s}Xe(e=>({...e,get:(t,n,r)=>Ge(t,n)||e.get(t,n,r),has:(t,n)=>!!Ge(t,n)||e.has(t,n)}));const Ct=["continue","continuePrimaryKey","advance"],Ke={},Te=new WeakMap,Qe=new WeakMap,Mt={get(e,t){if(!Ct.includes(t))return e[t];let n=Ke[t];return n||(n=Ke[t]=function(...r){Te.set(this,Qe.get(this)[t](...r))}),n}};async function*At(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Mt);for(Qe.set(n,t),de.set(n,Be(t));t;)yield n,t=await(Te.get(n)||t.continue()),Te.delete(n)}function Ue(e,t){return t===Symbol.asyncIterator&&Me(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Me(e,[IDBIndex,IDBObjectStore])}Xe(e=>({...e,get(t,n,r){return Ue(t,n)?At:e.get(t,n,r)},has(t,n){return Ue(t,n)||e.has(t,n)}}));const bt=2,qe="riddling",ce="titles",ke="titles";async function _e(){let e=!1;try{const t=await Lt(qe,bt,{upgrade(i){e=!0,i.objectStoreNames.contains(ce)||i.createObjectStore(ce)}});if(!e&&t.objectStoreNames.contains(ce)){const i=await t.get(ce,ke);if(i)return t.close(),i}const r=(await import("./chunks/titles-DgUjcc_g.js")).default;return t.put(ce,r,ke),t.close(),r}catch(t){if(t instanceof DOMException&&t.name==="VersionError")return await Dt(qe),_e()}return[]}let Z;const He={intraMode:1};let te=null;self.onmessage=async({data:e})=>{if(e.answers&&(!Z||!te)){Z=await _e();for(const p of e.answers)Z.includes(p)||Z.push(p);te=new se(He);return}const{guess:t}=e;if(t.length<=2){self.postMessage({pastGuess:t,results:[]});return}Z||(Z=await _e()),te||(te=new se(He));const n=te.filter(Z,t);if(!n){self.postMessage({pastGuess:t,results:[]});return}const r=te.info(n,Z,t),i=te.sort(r,Z,t);if(!i){self.postMessage({pastGuess:t,results:[]});return}const s=10,o=i.length>s?s:i.length,D=[];for(let p=0;p<o;p++){const b=i[p],k=se.highlight(Z[r.idx[b]],r.ranges[b]);D.push([Z[r.idx[b]],k])}self.postMessage({pastGuess:t,results:D})};
