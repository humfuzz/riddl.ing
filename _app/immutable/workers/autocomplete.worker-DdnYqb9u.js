const ve="riddling",ae="titles",Ve="titles";const ct=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}).compare,Me=1/0,Se=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ge="eexxaacctt",ft="A-Z",ut="a-z",ce=(e,t,n)=>e.replace(ft,t).replace(ut,n),$e={unicode:!1,alpha:null,interSplit:"[^A-Za-z\\d']+",intraSplit:"[a-z][A-Z]",intraBound:"[A-Za-z]\\d|\\d[A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:Me,intraChars:"[a-z\\d']",intraIns:null,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,Me],intraSub:null,intraTrn:null,intraDel:null,intraFilt:(e,t,n)=>!0,sort:(e,t,n)=>{let{idx:r,chars:i,terms:s,interLft2:o,interLft1:y,start:p,intraIns:T,interIns:q}=e;return r.map((P,b)=>b).sort((P,b)=>i[b]-i[P]||T[P]-T[b]||s[b]+o[b]+.5*y[b]-(s[P]+o[P]+.5*y[P])||q[P]-q[b]||p[P]-p[b]||ct(t[r[P]],t[r[b]]))}},ye=(e,t)=>t==0?"":t==1?e+"??":t==Me?e+"*?":e+`{0,${t}}?`,We="(?:\\b|_)";function se(e){e=Object.assign({},$e,e);let{unicode:t,interLft:n,interRgt:r,intraMode:i,intraSlice:s,intraIns:o,intraSub:y,intraTrn:p,intraDel:T,intraContr:q,intraSplit:P,interSplit:b,intraBound:fe,intraChars:ne}=e;o??(o=i),y??(y=i),p??(p=i),T??(T=i);let pe=e.letters??e.alpha;if(pe!=null){let l=pe.toLocaleUpperCase(),f=pe.toLocaleLowerCase();b=ce(b,l,f),P=ce(P,l,f),fe=ce(fe,l,f),ne=ce(ne,l,f),q=ce(q,l,f)}let G=t?"u":"";const je='".+?"',Ye=new RegExp(je,"gi"+G),Fe=new RegExp(`(?:\\s+|^)-(?:${ne}+|${je})`,"gi"+G);let{intraRules:Ie}=e;Ie==null&&(Ie=l=>{let f=$e.intraSlice,I=0,g=0,h=0,u=0;if(/[^\d]/.test(l)){let w=l.length;w<=4?w>=3&&(h=Math.min(p,1),w==4&&(I=Math.min(o,1))):(f=s,I=o,g=y,h=p,u=T)}return{intraSlice:f,intraIns:I,intraSub:g,intraTrn:h,intraDel:u}});let et=!!P,tt=new RegExp(P,"g"+G),nt=new RegExp(b,"g"+G),rt=new RegExp("^"+b+"|"+b+"$","g"+G),it=new RegExp(q,"gi"+G);const ue=l=>{let f=[];l=l.replace(Ye,g=>(f.push(g),Ge)),l=l.replace(rt,"").toLocaleLowerCase(),et&&(l=l.replace(tt,g=>g[0]+" "+g[1]));let I=0;return l.split(nt).filter(g=>g!="").map(g=>g===Ge?f[I++]:g)},lt=/[^\d]+|\d+/g,we=(l,f=0,I=!1)=>{let g=ue(l);if(g.length==0)return[];let h=Array(g.length).fill("");g=g.map((m,d)=>m.replace(it,_=>(h[d]=_,"")));let u;if(i==1)u=g.map((m,d)=>{if(m[0]==='"')return Se(m.slice(1,-1));let _="";for(let L of m.matchAll(lt)){let c=L[0],{intraSlice:a,intraIns:D,intraSub:E,intraTrn:S,intraDel:R}=Ie(c);if(D+E+S+R==0)_+=c+h[d];else{let[v,re]=a,$=c.slice(0,v),Q=c.slice(re),B=c.slice(v,re);D==1&&$.length==1&&$!=B[0]&&($+="(?!"+$+")");let Y=B.length,k=[c];if(E)for(let x=0;x<Y;x++)k.push($+B.slice(0,x)+ne+B.slice(x+1)+Q);if(S)for(let x=0;x<Y-1;x++)B[x]!=B[x+1]&&k.push($+B.slice(0,x)+B[x+1]+B[x]+B.slice(x+2)+Q);if(R)for(let x=0;x<Y;x++)k.push($+B.slice(0,x+1)+"?"+B.slice(x+1)+Q);if(D){let x=ye(ne,1);for(let V=0;V<Y;V++)k.push($+B.slice(0,V)+x+B.slice(V)+Q)}_+="(?:"+k.join("|")+")"+h[d]}}return _});else{let m=ye(ne,o);f==2&&o>0&&(m=")("+m+")("),u=g.map((d,_)=>d[0]==='"'?Se(d.slice(1,-1)):d.split("").map((L,c,a)=>(o==1&&c==0&&a.length>1&&L!=a[c+1]&&(L+="(?!"+L+")"),L)).join(m)+h[_])}let w=n==2?We:"",O=r==2?We:"",U=O+ye(e.interChars,e.interIns)+w;return f>0?I?u=w+"("+u.join(")"+O+"|"+w+"(")+")"+O:(u="("+u.join(")("+U+")(")+")",u="(.??"+w+")"+u+"("+O+".*)"):(u=u.join(U),u=w+u+O),[new RegExp(u,"i"+G),g,h]},he=(l,f,I)=>{let[g]=we(f);if(g==null)return null;let h=[];if(I!=null)for(let u=0;u<I.length;u++){let w=I[u];g.test(l[w])&&h.push(w)}else for(let u=0;u<l.length;u++)g.test(l[u])&&h.push(u);return h};let Pe=!!fe,me=new RegExp(b,G),Ee=new RegExp(fe,G);const ze=(l,f,I)=>{let[g,h,u]=we(I,1),[w]=we(I,2),O=h.length,U=l.length,m=Array(U).fill(0),d={idx:Array(U),start:m.slice(),chars:m.slice(),terms:m.slice(),interIns:m.slice(),intraIns:m.slice(),interLft2:m.slice(),interRgt2:m.slice(),interLft1:m.slice(),interRgt1:m.slice(),ranges:Array(U)},_=n==1||r==1,L=0;for(let c=0;c<l.length;c++){let a=f[l[c]],D=a.match(g),E=D.index+D[1].length,S=E,R=!1,v=0,re=0,$=0,Q=0,B=0,Y=0,k=0,x=0,V=[];for(let M=0,A=2;M<O;M++,A+=2){let J=D[A].toLocaleLowerCase(),Z=h[M],K=Z[0]=='"'?Z.slice(1,-1):Z+u[M],z=K.length,N=J.length,j=J==K;if(!j&&D[A+1].length>=z){let C=D[A+1].toLocaleLowerCase().indexOf(K);C>-1&&(V.push(S,N,C,z),S+=xe(D,A,C,z),J=K,N=z,j=!0,M==0&&(E=S))}if(_||j){let C=S-1,H=S+N,F=!1,oe=!1;if(C==-1||me.test(a[C]))j&&v++,F=!0;else{if(n==2){R=!0;break}if(Pe&&Ee.test(a[C]+a[C+1]))j&&re++,F=!0;else if(n==1){let ge=D[A+1],ie=S+N;if(ge.length>=z){let ee=0,le=!1,at=new RegExp(K,"ig"+G),Ne;for(;Ne=at.exec(ge);){ee=Ne.index;let Oe=ie+ee,Le=Oe-1;if(Le==-1||me.test(a[Le])){v++,le=!0;break}else if(Ee.test(a[Le]+a[Oe])){re++,le=!0;break}}le&&(F=!0,V.push(S,N,ee,z),S+=xe(D,A,ee,z),J=K,N=z,j=!0,M==0&&(E=S))}if(!F){R=!0;break}}}if(H==a.length||me.test(a[H]))j&&$++,oe=!0;else{if(r==2){R=!0;break}if(Pe&&Ee.test(a[H-1]+a[H]))j&&Q++,oe=!0;else if(r==1){R=!0;break}}j&&(B+=z,F&&oe&&Y++)}if(N>z&&(x+=N-z),M>0&&(k+=D[A-1].length),!e.intraFilt(K,J,S)){R=!0;break}M<O-1&&(S+=N+D[A+1].length)}if(!R){d.idx[L]=l[c],d.interLft2[L]=v,d.interLft1[L]=re,d.interRgt2[L]=$,d.interRgt1[L]=Q,d.chars[L]=B,d.terms[L]=Y,d.interIns[L]=k,d.intraIns[L]=x,d.start[L]=E;let M=a.match(w),A=M.index+M[1].length,J=V.length,Z=J>0?0:1/0,K=J-4;for(let C=2;C<M.length;){let H=M[C].length;if(Z<=K&&V[Z]==A){let F=V[Z+1],oe=V[Z+2],ge=V[Z+3],ie=C,ee="";for(let le=0;le<F;ie++)ee+=M[ie],le+=M[ie].length;M.splice(C,ie-C,ee),A+=xe(M,C,oe,ge),Z+=4}else A+=H,C++}A=M.index+M[1].length;let z=d.ranges[L]=[],N=A,j=A;for(let C=2;C<M.length;C++){let H=M[C].length;A+=H,C%2==0?j=A:H>0&&(z.push(N,j),N=j=A)}j>N&&z.push(N,j),L++}}if(L<l.length)for(let c in d)d[c]=d[c].slice(0,L);return d},xe=(l,f,I,g)=>{let h=l[f]+l[f+1].slice(0,I);return l[f-1]+=h,l[f]=l[f+1].slice(I,I+g),l[f+1]=l[f+1].slice(I+g),h.length},st=5,ot=(l,f,I,g=1e3,h)=>{I=I?I===!0?st:I:0;let u=null,w=null,O=[];f=f.replace(Fe,c=>{let a=c.trim().slice(1);return a[0]==='"'&&(a=Se(a.slice(1,-1))),O.push(a),""});let U=ue(f),m;if(O.length>0){if(m=new RegExp(O.join("|"),"i"+G),U.length==0){let c=[];for(let a=0;a<l.length;a++)m.test(l[a])||c.push(a);return[c,null,null]}}else if(U.length==0)return[null,null,null];if(I>0){let c=ue(f);if(c.length>1){let a=c.slice().sort((E,S)=>S.length-E.length);for(let E=0;E<a.length;E++){if((h==null?void 0:h.length)==0)return[[],null,null];h=he(l,a[E],h)}if(c.length>I)return[h,null,null];u=Je(c).map(E=>E.join(" ")),w=[];let D=new Set;for(let E=0;E<u.length;E++)if(D.size<h.length){let S=h.filter(v=>!D.has(v)),R=he(l,u[E],S);for(let v=0;v<R.length;v++)D.add(R[v]);w.push(R)}else w.push([])}}u==null&&(u=[f],w=[(h==null?void 0:h.length)>0?h:he(l,f)]);let d=null,_=null;if(O.length>0&&(w=w.map(c=>c.filter(a=>!m.test(l[a])))),w.reduce((c,a)=>c+a.length,0)<=g){d={},_=[];for(let c=0;c<w.length;c++){let a=w[c];if(a==null||a.length==0)continue;let D=u[c],E=ze(a,l,D),S=e.sort(E,l,D);if(c>0)for(let R=0;R<S.length;R++)S[R]+=_.length;for(let R in E)d[R]=(d[R]??[]).concat(E[R]);_=_.concat(S)}}return[[].concat(...w),d,_]};return{search:(...l)=>ot(...l),split:ue,filter:he,info:ze,sort:e.sort}}const ht=(()=>{let e={A:"ÁÀÃÂÄĄ",a:"áàãâäą",E:"ÉÈÊËĖ",e:"éèêëę",I:"ÍÌÎÏĮ",i:"íìîïį",O:"ÓÒÔÕÖ",o:"óòôõö",U:"ÚÙÛÜŪŲ",u:"úùûüūų",C:"ÇČĆ",c:"çčć",L:"Ł",l:"ł",N:"ÑŃ",n:"ñń",S:"ŠŚ",s:"šś",Z:"ŻŹ",z:"żź"},t=new Map,n="";for(let s in e)e[s].split("").forEach(o=>{n+=o,t.set(o,s)});let r=new RegExp(`[${n}]`,"g"),i=s=>t.get(s);return s=>{if(typeof s=="string")return s.replace(r,i);let o=Array(s.length);for(let y=0;y<s.length;y++)o[y]=s[y].replace(r,i);return o}})();function Je(e){e=e.slice();let t=e.length,n=[e.slice()],r=new Array(t).fill(0),i=1,s,o;for(;i<t;)r[i]<i?(s=i%2&&r[i],o=e[i],e[i]=e[s],e[s]=o,++r[i],i=1,n.push(e.slice())):(r[i]=0,++i);return n}const gt=(e,t)=>t?`<mark>${e}</mark>`:e,dt=(e,t)=>e+t;function pt(e,t,n=gt,r="",i=dt){r=i(r,n(e.substring(0,t[0]),!1))??r;for(let s=0;s<t.length;s+=2){let o=t[s],y=t[s+1];r=i(r,n(e.substring(o,y),!0))??r,s<t.length-3&&(r=i(r,n(e.substring(t[s+1],t[s+2]),!1))??r)}return r=i(r,n(e.substring(t[t.length-1]),!1))??r,r}se.latinize=ht;se.permute=e=>Je([...Array(e.length).keys()]).sort((n,r)=>{for(let i=0;i<n.length;i++)if(n[i]!=r[i])return n[i]-r[i];return 0}).map(n=>n.map(r=>e[r]));se.highlight=pt;const Ce=(e,t)=>t.some(n=>e instanceof n);let Ze,Ue;function It(){return Ze||(Ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wt(){return Ue||(Ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ae=new WeakMap,De=new WeakMap,de=new WeakMap;function mt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(X(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return de.set(t,e),t}function Et(e){if(Ae.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Ae.set(e,t)}let Te={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ae.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return X(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Xe(e){Te=e(Te)}function xt(e){return wt().includes(e)?function(...t){return e.apply(be(this),t),X(this.request)}:function(...t){return X(e.apply(be(this),t))}}function Lt(e){return typeof e=="function"?xt(e):(e instanceof IDBTransaction&&Et(e),Ce(e,It())?new Proxy(e,Te):e)}function X(e){if(e instanceof IDBRequest)return mt(e);if(De.has(e))return De.get(e);const t=Lt(e);return t!==e&&(De.set(e,t),de.set(t,e)),t}const be=e=>de.get(e);function St(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),y=X(o);return r&&o.addEventListener("upgradeneeded",p=>{r(X(o.result),p.oldVersion,p.newVersion,X(o.transaction),p)}),n&&o.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),y.then(p=>{s&&p.addEventListener("close",()=>s()),i&&p.addEventListener("versionchange",T=>i(T.oldVersion,T.newVersion,T))}).catch(()=>{}),y}function yt(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",r=>t(r.oldVersion,r)),X(n).then(()=>{})}const Dt=["get","getKey","getAll","getAllKeys","count"],Rt=["put","add","delete","clear"],Re=new Map;function Ke(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Re.get(t))return Re.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Rt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dt.includes(n)))return;const s=async function(o,...y){const p=this.transaction(o,i?"readwrite":"readonly");let T=p.store;return r&&(T=T.index(y.shift())),(await Promise.all([T[n](...y),i&&p.done]))[0]};return Re.set(t,s),s}Xe(e=>({...e,get:(t,n,r)=>Ke(t,n)||e.get(t,n,r),has:(t,n)=>!!Ke(t,n)||e.has(t,n)}));const Mt=["continue","continuePrimaryKey","advance"],He={},Be=new WeakMap,Qe=new WeakMap,Ct={get(e,t){if(!Mt.includes(t))return e[t];let n=He[t];return n||(n=He[t]=function(...r){Be.set(this,Qe.get(this)[t](...r))}),n}};async function*At(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Ct);for(Qe.set(n,t),de.set(n,be(t));t;)yield n,t=await(Be.get(n)||t.continue()),Be.delete(n)}function qe(e,t){return t===Symbol.asyncIterator&&Ce(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Ce(e,[IDBIndex,IDBObjectStore])}Xe(e=>({...e,get(t,n,r){return qe(t,n)?At:e.get(t,n,r)},has(t,n){return qe(t,n)||e.has(t,n)}}));async function _e(){let e=!1;try{const t=await St(ve,9,{upgrade(i){e=!0,i.objectStoreNames.contains(ae)||i.createObjectStore(ae)}});if(!e&&t.objectStoreNames.contains(ae)){const i=await t.get(ae,Ve);if(i)return t.close(),i}const n=await import("./chunks/titles-C5vC4N_F.js"),r=JSON.parse(n.default);return t.put(ae,r,Ve),t.close(),r}catch(t){if(t instanceof DOMException&&t.name==="VersionError")return await yt(ve),_e()}return[]}let W;const ke={intraMode:1};let te;self.onmessage=async({data:e})=>{if(e.answers&&(W===void 0||te===void 0)){W=await _e();for(const p of e.answers)W.includes(p)||W.push(p);te=new se(ke);return}const{guess:t}=e;if(t.length<3){self.postMessage({pastGuess:t,results:[]});return}W===void 0&&(W=await _e()),te===void 0&&(te=new se(ke));const n=te.filter(W,t);if(!n){self.postMessage({pastGuess:t,results:[]});return}const r=te.info(n,W,t),i=te.sort(r,W,t);if(!i){self.postMessage({pastGuess:t,results:[]});return}const s=10,o=i.length>s?s:i.length,y=[];for(let p=0;p<o;p++){const T=i[p],q=se.highlight(W[r.idx[T]],r.ranges[T]);y.push([W[r.idx[T]],q])}self.postMessage({pastGuess:t,results:y})};
