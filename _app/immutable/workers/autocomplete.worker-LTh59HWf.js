const Ve="riddling",ae="titles",Ge="titles";const ft=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}).compare,Ce=1/0,Se=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),$e="eexxaacctt",ut="A-Z",ht="a-z",ce=(e,t,n)=>e.replace(ut,t).replace(ht,n),We={unicode:!1,alpha:null,interSplit:"[^A-Za-z\\d']+",intraSplit:"[a-z][A-Z]",intraBound:"[A-Za-z]\\d|\\d[A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:Ce,intraChars:"[a-z\\d']",intraIns:null,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,Ce],intraSub:null,intraTrn:null,intraDel:null,intraFilt:(e,t,n)=>!0,sort:(e,t,n)=>{let{idx:r,chars:i,terms:s,interLft2:o,interLft1:y,start:d,intraIns:T,interIns:q}=e;return r.map((P,_)=>_).sort((P,_)=>i[_]-i[P]||T[P]-T[_]||s[_]+o[_]+.5*y[_]-(s[P]+o[P]+.5*y[P])||q[P]-q[_]||d[P]-d[_]||ft(t[r[P]],t[r[_]]))}},ye=(e,t)=>t==0?"":t==1?e+"??":t==Ce?e+"*?":e+`{0,${t}}?`,Ze="(?:\\b|_)";function se(e){e=Object.assign({},We,e);let{unicode:t,interLft:n,interRgt:r,intraMode:i,intraSlice:s,intraIns:o,intraSub:y,intraTrn:d,intraDel:T,intraContr:q,intraSplit:P,interSplit:_,intraBound:fe,intraChars:ne}=e;o??(o=i),y??(y=i),d??(d=i),T??(T=i);let pe=e.letters??e.alpha;if(pe!=null){let l=pe.toLocaleUpperCase(),f=pe.toLocaleLowerCase();_=ce(_,l,f),P=ce(P,l,f),fe=ce(fe,l,f),ne=ce(ne,l,f),q=ce(q,l,f)}let G=t?"u":"";const Pe='".+?"',Fe=new RegExp(Pe,"gi"+G),et=new RegExp(`(?:\\s+|^)-(?:${ne}+|${Pe})`,"gi"+G);let{intraRules:Ie}=e;Ie==null&&(Ie=l=>{let f=We.intraSlice,I=0,g=0,h=0,u=0;if(/[^\d]/.test(l)){let w=l.length;w<=4?w>=3&&(h=Math.min(d,1),w==4&&(I=Math.min(o,1))):(f=s,I=o,g=y,h=d,u=T)}return{intraSlice:f,intraIns:I,intraSub:g,intraTrn:h,intraDel:u}});let tt=!!P,nt=new RegExp(P,"g"+G),rt=new RegExp(_,"g"+G),it=new RegExp("^"+_+"|"+_+"$","g"+G),lt=new RegExp(q,"gi"+G);const ue=l=>{let f=[];l=l.replace(Fe,g=>(f.push(g),$e)),l=l.replace(it,"").toLocaleLowerCase(),tt&&(l=l.replace(nt,g=>g[0]+" "+g[1]));let I=0;return l.split(rt).filter(g=>g!="").map(g=>g===$e?f[I++]:g)},st=/[^\d]+|\d+/g,we=(l,f=0,I=!1)=>{let g=ue(l);if(g.length==0)return[];let h=Array(g.length).fill("");g=g.map((m,p)=>m.replace(lt,B=>(h[p]=B,"")));let u;if(i==1)u=g.map((m,p)=>{if(m[0]==='"')return Se(m.slice(1,-1));let B="";for(let L of m.matchAll(st)){let c=L[0],{intraSlice:a,intraIns:D,intraSub:E,intraTrn:S,intraDel:R}=Ie(c);if(D+E+S+R==0)B+=c+h[p];else{let[v,re]=a,$=c.slice(0,v),Q=c.slice(re),b=c.slice(v,re);D==1&&$.length==1&&$!=b[0]&&($+="(?!"+$+")");let Y=b.length,k=[c];if(E)for(let x=0;x<Y;x++)k.push($+b.slice(0,x)+ne+b.slice(x+1)+Q);if(S)for(let x=0;x<Y-1;x++)b[x]!=b[x+1]&&k.push($+b.slice(0,x)+b[x+1]+b[x]+b.slice(x+2)+Q);if(R)for(let x=0;x<Y;x++)k.push($+b.slice(0,x+1)+"?"+b.slice(x+1)+Q);if(D){let x=ye(ne,1);for(let V=0;V<Y;V++)k.push($+b.slice(0,V)+x+b.slice(V)+Q)}B+="(?:"+k.join("|")+")"+h[p]}}return B});else{let m=ye(ne,o);f==2&&o>0&&(m=")("+m+")("),u=g.map((p,B)=>p[0]==='"'?Se(p.slice(1,-1)):p.split("").map((L,c,a)=>(o==1&&c==0&&a.length>1&&L!=a[c+1]&&(L+="(?!"+L+")"),L)).join(m)+h[B])}let w=n==2?Ze:"",O=r==2?Ze:"",U=O+ye(e.interChars,e.interIns)+w;return f>0?I?u=w+"("+u.join(")"+O+"|"+w+"(")+")"+O:(u="("+u.join(")("+U+")(")+")",u="(.??"+w+")"+u+"("+O+".*)"):(u=u.join(U),u=w+u+O),[new RegExp(u,"i"+G),g,h]},he=(l,f,I)=>{let[g]=we(f);if(g==null)return null;let h=[];if(I!=null)for(let u=0;u<I.length;u++){let w=I[u];g.test(l[w])&&h.push(w)}else for(let u=0;u<l.length;u++)g.test(l[u])&&h.push(u);return h};let ze=!!fe,me=new RegExp(_,G),Ee=new RegExp(fe,G);const Ne=(l,f,I)=>{let[g,h,u]=we(I,1),[w]=we(I,2),O=h.length,U=l.length,m=Array(U).fill(0),p={idx:Array(U),start:m.slice(),chars:m.slice(),terms:m.slice(),interIns:m.slice(),intraIns:m.slice(),interLft2:m.slice(),interRgt2:m.slice(),interLft1:m.slice(),interRgt1:m.slice(),ranges:Array(U)},B=n==1||r==1,L=0;for(let c=0;c<l.length;c++){let a=f[l[c]],D=a.match(g),E=D.index+D[1].length,S=E,R=!1,v=0,re=0,$=0,Q=0,b=0,Y=0,k=0,x=0,V=[];for(let M=0,A=2;M<O;M++,A+=2){let J=D[A].toLocaleLowerCase(),Z=h[M],K=Z[0]=='"'?Z.slice(1,-1):Z+u[M],z=K.length,N=J.length,j=J==K;if(!j&&D[A+1].length>=z){let C=D[A+1].toLocaleLowerCase().indexOf(K);C>-1&&(V.push(S,N,C,z),S+=xe(D,A,C,z),J=K,N=z,j=!0,M==0&&(E=S))}if(B||j){let C=S-1,H=S+N,F=!1,oe=!1;if(C==-1||me.test(a[C]))j&&v++,F=!0;else{if(n==2){R=!0;break}if(ze&&Ee.test(a[C]+a[C+1]))j&&re++,F=!0;else if(n==1){let ge=D[A+1],ie=S+N;if(ge.length>=z){let ee=0,le=!1,ct=new RegExp(K,"ig"+G),Oe;for(;Oe=ct.exec(ge);){ee=Oe.index;let ve=ie+ee,Le=ve-1;if(Le==-1||me.test(a[Le])){v++,le=!0;break}else if(Ee.test(a[Le]+a[ve])){re++,le=!0;break}}le&&(F=!0,V.push(S,N,ee,z),S+=xe(D,A,ee,z),J=K,N=z,j=!0,M==0&&(E=S))}if(!F){R=!0;break}}}if(H==a.length||me.test(a[H]))j&&$++,oe=!0;else{if(r==2){R=!0;break}if(ze&&Ee.test(a[H-1]+a[H]))j&&Q++,oe=!0;else if(r==1){R=!0;break}}j&&(b+=z,F&&oe&&Y++)}if(N>z&&(x+=N-z),M>0&&(k+=D[A-1].length),!e.intraFilt(K,J,S)){R=!0;break}M<O-1&&(S+=N+D[A+1].length)}if(!R){p.idx[L]=l[c],p.interLft2[L]=v,p.interLft1[L]=re,p.interRgt2[L]=$,p.interRgt1[L]=Q,p.chars[L]=b,p.terms[L]=Y,p.interIns[L]=k,p.intraIns[L]=x,p.start[L]=E;let M=a.match(w),A=M.index+M[1].length,J=V.length,Z=J>0?0:1/0,K=J-4;for(let C=2;C<M.length;){let H=M[C].length;if(Z<=K&&V[Z]==A){let F=V[Z+1],oe=V[Z+2],ge=V[Z+3],ie=C,ee="";for(let le=0;le<F;ie++)ee+=M[ie],le+=M[ie].length;M.splice(C,ie-C,ee),A+=xe(M,C,oe,ge),Z+=4}else A+=H,C++}A=M.index+M[1].length;let z=p.ranges[L]=[],N=A,j=A;for(let C=2;C<M.length;C++){let H=M[C].length;A+=H,C%2==0?j=A:H>0&&(z.push(N,j),N=j=A)}j>N&&z.push(N,j),L++}}if(L<l.length)for(let c in p)p[c]=p[c].slice(0,L);return p},xe=(l,f,I,g)=>{let h=l[f]+l[f+1].slice(0,I);return l[f-1]+=h,l[f]=l[f+1].slice(I,I+g),l[f+1]=l[f+1].slice(I+g),h.length},ot=5,at=(l,f,I,g=1e3,h)=>{I=I?I===!0?ot:I:0;let u=null,w=null,O=[];f=f.replace(et,c=>{let a=c.trim().slice(1);return a[0]==='"'&&(a=Se(a.slice(1,-1))),O.push(a),""});let U=ue(f),m;if(O.length>0){if(m=new RegExp(O.join("|"),"i"+G),U.length==0){let c=[];for(let a=0;a<l.length;a++)m.test(l[a])||c.push(a);return[c,null,null]}}else if(U.length==0)return[null,null,null];if(I>0){let c=ue(f);if(c.length>1){let a=c.slice().sort((E,S)=>S.length-E.length);for(let E=0;E<a.length;E++){if((h==null?void 0:h.length)==0)return[[],null,null];h=he(l,a[E],h)}if(c.length>I)return[h,null,null];u=Xe(c).map(E=>E.join(" ")),w=[];let D=new Set;for(let E=0;E<u.length;E++)if(D.size<h.length){let S=h.filter(v=>!D.has(v)),R=he(l,u[E],S);for(let v=0;v<R.length;v++)D.add(R[v]);w.push(R)}else w.push([])}}u==null&&(u=[f],w=[(h==null?void 0:h.length)>0?h:he(l,f)]);let p=null,B=null;if(O.length>0&&(w=w.map(c=>c.filter(a=>!m.test(l[a])))),w.reduce((c,a)=>c+a.length,0)<=g){p={},B=[];for(let c=0;c<w.length;c++){let a=w[c];if(a==null||a.length==0)continue;let D=u[c],E=Ne(a,l,D),S=e.sort(E,l,D);if(c>0)for(let R=0;R<S.length;R++)S[R]+=B.length;for(let R in E)p[R]=(p[R]??[]).concat(E[R]);B=B.concat(S)}}return[[].concat(...w),p,B]};return{search:(...l)=>at(...l),split:ue,filter:he,info:Ne,sort:e.sort}}const gt=(()=>{let e={A:"ÁÀÃÂÄĄ",a:"áàãâäą",E:"ÉÈÊËĖ",e:"éèêëę",I:"ÍÌÎÏĮ",i:"íìîïį",O:"ÓÒÔÕÖ",o:"óòôõö",U:"ÚÙÛÜŪŲ",u:"úùûüūų",C:"ÇČĆ",c:"çčć",L:"Ł",l:"ł",N:"ÑŃ",n:"ñń",S:"ŠŚ",s:"šś",Z:"ŻŹ",z:"żź"},t=new Map,n="";for(let s in e)e[s].split("").forEach(o=>{n+=o,t.set(o,s)});let r=new RegExp(`[${n}]`,"g"),i=s=>t.get(s);return s=>{if(typeof s=="string")return s.replace(r,i);let o=Array(s.length);for(let y=0;y<s.length;y++)o[y]=s[y].replace(r,i);return o}})();function Xe(e){e=e.slice();let t=e.length,n=[e.slice()],r=new Array(t).fill(0),i=1,s,o;for(;i<t;)r[i]<i?(s=i%2&&r[i],o=e[i],e[i]=e[s],e[s]=o,++r[i],i=1,n.push(e.slice())):(r[i]=0,++i);return n}const dt=(e,t)=>t?`<mark>${e}</mark>`:e,pt=(e,t)=>e+t;function It(e,t,n=dt,r="",i=pt){r=i(r,n(e.substring(0,t[0]),!1))??r;for(let s=0;s<t.length;s+=2){let o=t[s],y=t[s+1];r=i(r,n(e.substring(o,y),!0))??r,s<t.length-3&&(r=i(r,n(e.substring(t[s+1],t[s+2]),!1))??r)}return r=i(r,n(e.substring(t[t.length-1]),!1))??r,r}se.latinize=gt;se.permute=e=>Xe([...Array(e.length).keys()]).sort((n,r)=>{for(let i=0;i<n.length;i++)if(n[i]!=r[i])return n[i]-r[i];return 0}).map(n=>n.map(r=>e[r]));se.highlight=It;const Ae=(e,t)=>t.some(n=>e instanceof n);let Ue,Ke;function wt(){return Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mt(){return Ke||(Ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Te=new WeakMap,De=new WeakMap,de=new WeakMap;function Et(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(X(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return de.set(t,e),t}function xt(e){if(Te.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Te.set(e,t)}let _e={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Te.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return X(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Qe(e){_e=e(_e)}function Lt(e){return mt().includes(e)?function(...t){return e.apply(be(this),t),X(this.request)}:function(...t){return X(e.apply(be(this),t))}}function St(e){return typeof e=="function"?Lt(e):(e instanceof IDBTransaction&&xt(e),Ae(e,wt())?new Proxy(e,_e):e)}function X(e){if(e instanceof IDBRequest)return Et(e);if(De.has(e))return De.get(e);const t=St(e);return t!==e&&(De.set(e,t),de.set(t,e)),t}const be=e=>de.get(e);function yt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),y=X(o);return r&&o.addEventListener("upgradeneeded",d=>{r(X(o.result),d.oldVersion,d.newVersion,X(o.transaction),d)}),n&&o.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),y.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",T=>i(T.oldVersion,T.newVersion,T))}).catch(()=>{}),y}function Dt(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",r=>t(r.oldVersion,r)),X(n).then(()=>{})}const Rt=["get","getKey","getAll","getAllKeys","count"],Mt=["put","add","delete","clear"],Re=new Map;function He(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Re.get(t))return Re.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Mt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Rt.includes(n)))return;const s=async function(o,...y){const d=this.transaction(o,i?"readwrite":"readonly");let T=d.store;return r&&(T=T.index(y.shift())),(await Promise.all([T[n](...y),i&&d.done]))[0]};return Re.set(t,s),s}Qe(e=>({...e,get:(t,n,r)=>He(t,n)||e.get(t,n,r),has:(t,n)=>!!He(t,n)||e.has(t,n)}));const Ct=["continue","continuePrimaryKey","advance"],qe={},Be=new WeakMap,Ye=new WeakMap,At={get(e,t){if(!Ct.includes(t))return e[t];let n=qe[t];return n||(n=qe[t]=function(...r){Be.set(this,Ye.get(this)[t](...r))}),n}};async function*Tt(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,At);for(Ye.set(n,t),de.set(n,be(t));t;)yield n,t=await(Be.get(n)||t.continue()),Be.delete(n)}function ke(e,t){return t===Symbol.asyncIterator&&Ae(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Ae(e,[IDBIndex,IDBObjectStore])}Qe(e=>({...e,get(t,n,r){return ke(t,n)?Tt:e.get(t,n,r)},has(t,n){return ke(t,n)||e.has(t,n)}}));async function je(){let e=!1;try{const t=await yt(Ve,10,{upgrade(i){e=!0,i.objectStoreNames.contains(ae)||i.createObjectStore(ae)}});if(!e&&t.objectStoreNames.contains(ae)){const i=await t.get(ae,Ge);if(i)return t.close(),i}const n=await import("./chunks/titles-Cs83YHHr.js"),r=JSON.parse(n.default);return t.put(ae,r,Ge),t.close(),r}catch(t){if(t instanceof DOMException&&t.name==="VersionError")return await Dt(Ve),je()}return[]}let W;const Je={intraMode:1};let te,Me=3;self.onmessage=async({data:e})=>{if(e.answers&&(W===void 0||te===void 0)){W=await je();for(const d of e.answers)W.includes(d)||W.push(d),d.length<Me&&(Me=d.length);te=new se(Je);return}const{guess:t}=e;if(t.length<Me){self.postMessage({pastGuess:t,results:[]});return}W===void 0&&(W=await je()),te===void 0&&(te=new se(Je));const n=te.filter(W,t);if(!n){self.postMessage({pastGuess:t,results:[]});return}const r=te.info(n,W,t),i=te.sort(r,W,t);if(!i){self.postMessage({pastGuess:t,results:[]});return}const s=10,o=i.length>s?s:i.length,y=[];for(let d=0;d<o;d++){const T=i[d],q=se.highlight(W[r.idx[T]],r.ranges[T]);y.push([W[r.idx[T]],q])}self.postMessage({pastGuess:t,results:y})};
