import{r as Se,b as me,w as Ue}from"./entry.D82WuWj3.js";import{v as O,s as Ge,e as E,a as G,c as q,b as T,g as C,f as b,p as m,F as R,i as U,h as y,W as Z,z as k,X as W,I as de,k as Q,o as Ce,B as ze,n as pe,D as Ne,t as L,d as F,j as Oe,Y as Pe,Z as Re,r as We}from"./scheduler.CpL3koiQ.js";import{F as H,a as we,q as x,M as je,I as ge,g as Be,w as $}from"./Icon.DvmMiXPg.js";import{S as Le,i as Fe,a as v,g as ee,t as D,c as te,b as be,d as _e,m as ye,e as Ie}from"./index.zgUojP62.js";function se(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const Ee=[" ","the","e","t","a","of","o","and","i","n","s","e ","r"," th"," t","in","he","th","h","he ","to","l","s ","d"," a","an","er","c"," o","d ","on"," of","re","of ","t ",", ","is","u","at","   ","n ","or","which","f","m","as","it","that","was","en","  "," w","es"," an"," i","f ","g","p","nd"," s","nd ","ed ","w","ed","for","te","ing","y ","The"," c","ti","r ","his","st"," in","ar","nt",","," to","y","ng"," h","with","le","al","to ","b","ou","be","were"," b","se","o ","ent","ha","ng ","their","hi","from"," f","in ","de","ion","me","v",".","ve","all","re ","ri","ro","is ","co","f t","are","ea",". ","her"," m","er "," p","es ","by","they","di","ra","ic","not","s, ","d t","at ","ce","la","h ","ne","as ","tio","on ","n t","io","we"," a ","om",", a","s o","ur","li","ll","ch","had","this","e t","g "," wh","ere"," co","e o","a ","us"," d","ss"," be"," e","s a","ma","one","t t","or ","but","el","so","l ","e s","s,","no","ter"," wa","iv","ho","e a"," r","hat","s t","ns","ch ","wh","tr","ut","have","ly ","ta"," ha"," on","tha","-"," l","ati","en ","pe"," re","there","ass","si"," fo","wa","ec","our","who","its","z","fo","rs","ot","un","im","th ","nc","ate","ver","ad"," we","ly","ee"," n","id"," cl","ac","il","rt"," wi","div","e, "," it","whi"," ma","ge","x","e c","men","I","’","“","”","|","I’m ","You ","ou ",".|"," me.","’m a","how"," am I?"," and ","here"],{push:M}=Array.prototype,{min:Ve}=Math,He=new TextEncoder,ne=new TextDecoder;class Y extends Error{constructor(t){super(t),this.name="DecompressError"}}const S=(...e)=>e.join(" "),Ye=e=>{const t=new Map;for(const[s,n]of e.entries()){let o=t;const a=n[Symbol.iterator]();for(const r of a){let l=o.get(r);if(!l){const i=new Map;o.set(r,i),l=i}o=l}o.value=s}return t},Je=(e,t,s)=>{let n=e,o=s;const a=[];do n=n.get(t[o]),n&&(a.push({character:t[o],value:n.value,index:o}),o+=1);while(n&&t[o]);let r=a.length-1;for(;r>0&&a[r].value===void 0;)r-=1;return[a[r]&&a[r].value,(a[r]&&a[r].index||s)+1]},V=(e,t)=>{const s=[];return t>1?s.push(255,t-1):s.push(254),M.apply(s,e.splice(0,t)),s},Ke=(e,t)=>{const s=[...e],n=s.length,o=[];let a=0;const r=[];for(;a<n;){const[l,i]=Je(t,s,a);if(l!==void 0){for(;o.length>0;)M.apply(r,V(o,Ve(256,o.length)));r.push(l)}else for(M.apply(o,He.encode(s[a]));o.length>=256;)M.apply(r,V(o,256));a=i}o.length>0&&M.apply(r,V(o,o.length));try{return Uint8Array.of(...r)}catch{return new Uint8Array(r)}},re=(e,t,s)=>{const n=t+1;if(n>=s)throw new Y(S(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read at index ${n}.`));return[e.slice(n,n+1),n+1]},Xe=(e,t,s)=>{const n=t+1;if(n>=s)throw new Y(S(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read at index ${n}.`));const o=n+1,a=n+e[n]+2;if(a>s)throw new Y(S(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read from index ${o} to ${a}.`));return[e.slice(o,a),a]},Ze=(e,t)=>{const s=e.length;let n=0,o="";for(;n<s;){const a=e[n];if(a===254){const[r,l]=re(e,n,s);o+=ne.decode(r),n=l;continue}if(a===255){const r=[];do{const[l,i]=Xe(e,n,s);M.apply(r,l),n=i}while(e[n]===255);if(e[n]===254){const[l,i]=re(e,n,s);r.push(l),n=i}o+=ne.decode(Uint8Array.of(...r));continue}o+=t[a],n+=1}return o},qe=({dictionary:e}={})=>{if(!Array.isArray(e)||e.length>254)throw new TypeError(S("The `dictionary` option must be an array with at most 254 elements.",Array.isArray(e)?`It has ${e.length} elements.`:`It is \`${e==null?e:e.constructor.name}\`.`));const t=Ye(e);return{compress(s){if(typeof s!="string")throw new TypeError(S("The `string` argument must be of type ’string’.",`Its type is \`${typeof s}\`.`));return Ke(s,t)},decompress(s){if(s==null||s.constructor.name!=="Uint8Array")throw new TypeError(S("The `buffer` argument must be an instance of ’Uint8Array’.",`It is ${s==null?`\`${s}\``:`an instance of \`${s.constructor.name}\``}.`));return Ze(s,e)}}};async function ht(e){const s=await(await fetch(`${me}/questions.json`,{headers:{"Cache-Control":"no-cache"}})).json();if(s[e]&&s[e].answers){const n=s[e].answers.split(we);return P({...s[e],answers:n})}else return null}function Qe(e){return e.trim().toLowerCase()}function P(e){return{q1:e.q1.trim(),q2:e.q2.trim(),q3:e.q3.trim(),q4:e.q4.trim(),q5:e.q5.trim(),answers:e.answers.map(t=>Qe(t)),prompt:e.prompt.trim(),...e.message&&{message:e.message.trim()}}}function xe(e){return!!(e&&e.answers&&e.answers.every(t=>t)&&e.prompt&&e.q1&&e.q2&&e.q3&&e.q4&&e.q5)}async function mt(e=!1){const s=new URL(window.location.href).searchParams.get("game");if(s)try{const[n,o]=$e(s);if(xe(n))return e&&o&&(async()=>(await O(),Se(o,{})))(),n;throw new Error("Invalid custom game.")}catch{throw new Error("Invalid custom game.")}return null}function $e(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),s=atob(t),n=Uint8Array.from(s,l=>l.codePointAt(0)??0);let o,a,r;try{o=nt(n),a=P(ae(o))}catch{try{o=new TextDecoder().decode(n),a=P(ae(o)),r=oe(a)}catch{o=new TextDecoder().decode(n),a=P(JSON.parse(o)),r=oe(a)}}return[a,r]}function oe(e){return`${me}/?game=${et(st(tt(e)))}`}function et(e){let t;e instanceof Uint8Array?t=e:t=new TextEncoder().encode(e);const s=Array.from(t,a=>String.fromCodePoint(a)).join("");return btoa(s).replace(/\+/g,"-").replace(/\//g,"_")}function tt(e){let t=[e.q1,e.q2,e.q3,e.q4,e.q5,e.answers.join(",")];return e.prompt==="What am I?"?e.message&&t.push("",e.message):(t.push(e.prompt),e.message&&t.push(e.message)),t.join(H)}function ae(e){if(!e.includes(H))throw new Error("Invalid minified game: no | separator");const t=e.split(H);if(t.length<6)throw new Error("Invalid minified game: too few fields");const[s,n,o,a,r,l,i,g]=t;return{q1:s,q2:n,q3:o,q4:a,q5:r,answers:l.split(we),prompt:i||"What am I?",...g&&{message:g}}}function st(e){const{compress:t}=qe({dictionary:Ee});return t(e)}function nt(e){const{decompress:t}=qe({dictionary:Ee});return t(e)}function dt(e){const t=e-1;return t*t*t+1}function pt(e){return-.5*(Math.cos(Math.PI*e)-1)}function rt(e){return new Worker(""+new URL("../workers/autocomplete.worker-DdnYqb9u.js",import.meta.url).href,{type:"module",name:e==null?void 0:e.name})}function le(e,t,s){const n=e.slice();return n[26]=t[s],n[28]=s,n}function ie(e){let t,s,n,o,a;return s=new ge({props:{image:"arrow",color:"var(--color-accent-1)",alt:"guess"}}),{c(){t=E("button"),be(s.$$.fragment),this.h()},l(r){t=q(r,"BUTTON",{id:!0,class:!0});var l=T(t);_e(s.$$.fragment,l),l.forEach(b),this.h()},h(){m(t,"id","guess-btn"),m(t,"class","icon svelte-10t2zie")},m(r,l){U(r,t,l),ye(s,t,null),n=!0,o||(a=k(t,"click",W(e[9])),o=!0)},p:pe,i(r){n||(v(s.$$.fragment,r),n=!0)},o(r){D(s.$$.fragment,r),n=!1},d(r){r&&b(t),Ie(s),o=!1,a()}}}function ce(e){let t,s,n,o,a;return s=new ge({props:{image:"cross",color:"var(--color-text-3)",alt:"clear"}}),{c(){t=E("button"),be(s.$$.fragment),this.h()},l(r){t=q(r,"BUTTON",{id:!0,class:!0});var l=T(t);_e(s.$$.fragment,l),l.forEach(b),this.h()},h(){m(t,"id","clear-btn"),m(t,"class","icon svelte-10t2zie")},m(r,l){U(r,t,l),ye(s,t,null),n=!0,o||(a=k(t,"click",W(e[12])),o=!0)},p:pe,i(r){n||(v(s.$$.fragment,r),n=!0)},o(r){D(s.$$.fragment,r),n=!1},d(r){r&&b(t),Ie(s),o=!1,a()}}}function ue(e){let t,s,n=e[3]&&fe(e),o=se(e[5]),a=[];for(let r=0;r<o.length;r+=1)a[r]=he(le(e,o,r));return{c(){t=E("ul"),n&&n.c(),s=G();for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){t=q(r,"UL",{id:!0,role:!0,class:!0});var l=T(t);n&&n.l(l),s=C(l);for(let i=0;i<a.length;i+=1)a[i].l(l);l.forEach(b),this.h()},h(){m(t,"id","matches"),m(t,"role","listbox"),m(t,"class","svelte-10t2zie")},m(r,l){U(r,t,l),n&&n.m(t,null),y(t,s);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(t,null)},p(r,l){if(r[3]?n?n.p(r,l):(n=fe(r),n.c(),n.m(t,s)):n&&(n.d(1),n=null),l&3108){o=se(r[5]);let i;for(i=0;i<o.length;i+=1){const g=le(r,o,i);a[i]?a[i].p(g,l):(a[i]=he(g),a[i].c(),a[i].m(t,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=o.length}},d(r){r&&b(t),n&&n.d(),Ne(a,r)}}}function fe(e){let t,s,n,o,a;return{c(){t=E("li"),s=L("no results for "),n=E("span"),o=L(e[1]),a=L(", try something else"),this.h()},l(r){t=q(r,"LI",{class:!0});var l=T(t);s=F(l,"no results for "),n=q(l,"SPAN",{class:!0});var i=T(n);o=F(i,e[1]),i.forEach(b),a=F(l,", try something else"),l.forEach(b),this.h()},h(){m(n,"class","no-matches-guess svelte-10t2zie"),m(t,"class","match no-matches svelte-10t2zie")},m(r,l){U(r,t,l),y(t,s),y(t,n),y(n,o),y(t,a)},p(r,l){l&2&&Oe(o,r[1])},d(r){r&&b(t)}}}function he(e){let t,s,n=e[26][1]+"",o,a,r,l,i;function g(){return e[21](e[28])}function I(...f){return e[22](e[26],...f)}return{c(){t=E("li"),s=new Pe(!1),o=G(),this.h()},l(f){t=q(f,"LI",{id:!0,class:!0,role:!0,tabindex:!0,"aria-selected":!0});var u=T(t);s=Re(u,!1),o=C(u),u.forEach(b),this.h()},h(){s.a=o,m(t,"id","match-"+e[28]),m(t,"class",a=R("match"+(e[28]===e[2]?" selected":""))+" svelte-10t2zie"),m(t,"role","option"),m(t,"tabindex",e[28]),m(t,"aria-selected",r=e[28]===e[2]?"true":"false")},m(f,u){U(f,t,u),s.m(n,t),y(t,o),l||(i=[k(t,"mouseenter",g),k(t,"mousedown",W(I))],l=!0)},p(f,u){e=f,u&32&&n!==(n=e[26][1]+"")&&s.p(n),u&4&&a!==(a=R("match"+(e[28]===e[2]?" selected":""))+" svelte-10t2zie")&&m(t,"class",a),u&4&&r!==(r=e[28]===e[2]?"true":"false")&&m(t,"aria-selected",r)},d(f){f&&b(t),l=!1,de(i)}}}function ot(e){let t,s,n,o,a,r,l,i,g,I,f,u=e[7]&&ie(e),w=e[1].length>0&&ce(e),d=e[4]&&ue(e);return{c(){t=E("form"),s=E("div"),n=E("input"),r=G(),u&&u.c(),l=G(),w&&w.c(),i=G(),d&&d.c(),this.h()},l(h){t=q(h,"FORM",{});var p=T(t);s=q(p,"DIV",{id:!0,class:!0});var _=T(s);n=q(_,"INPUT",{type:!0,list:!0,id:!0,class:!0,autocomplete:!0,placeholder:!0,"aria-autocomplete":!0,"aria-expanded":!0,"aria-controls":!0,"aria-label":!0}),r=C(_),u&&u.l(_),l=C(_),w&&w.l(_),_.forEach(b),i=C(p),d&&d.l(p),p.forEach(b),this.h()},h(){m(n,"type","search"),m(n,"list","guess-autocomplete"),m(n,"id","guess"),m(n,"class",o=R(e[7]?"can-submit":"")+" svelte-10t2zie"),m(n,"autocomplete","off"),n.autofocus=a=!e[0],n.required=!0,m(n,"placeholder","Type a guess"),m(n,"aria-autocomplete","list"),m(n,"aria-expanded","false"),m(n,"aria-controls","matches"),m(n,"aria-label","Type a guess"),m(s,"id","search-box"),m(s,"class","svelte-10t2zie")},m(h,p){U(h,t,p),y(t,s),y(s,n),Z(n,e[1]),e[20](n),y(s,r),u&&u.m(s,null),y(s,l),w&&w.m(s,null),y(t,i),d&&d.m(t,null),g=!0,e[0]||n.focus(),I||(f=[k(n,"input",e[19]),k(n,"keydown",e[13]),k(t,"submit",W(e[9]))],I=!0)},p(h,[p]){(!g||p&128&&o!==(o=R(h[7]?"can-submit":"")+" svelte-10t2zie"))&&m(n,"class",o),(!g||p&1&&a!==(a=!h[0]))&&(n.autofocus=a),p&2&&n.value!==h[1]&&Z(n,h[1]),h[7]?u?(u.p(h,p),p&128&&v(u,1)):(u=ie(h),u.c(),v(u,1),u.m(s,l)):u&&(ee(),D(u,1,1,()=>{u=null}),te()),h[1].length>0?w?(w.p(h,p),p&2&&v(w,1)):(w=ce(h),w.c(),v(w,1),w.m(s,null)):w&&(ee(),D(w,1,1,()=>{w=null}),te()),h[4]?d?d.p(h,p):(d=ue(h),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(h){g||(v(u),v(w),g=!0)},o(h){D(u),D(w),g=!1},d(h){h&&b(t),e[20](null),u&&u.d(),w&&w.d(),d&&d.d(),I=!1,de(f)}}}const at=10;function lt(e,t,s){let n,o,a,r,l,i;Q(e,x,c=>s(24,i=c));let{answers:g}=t,{disabled:I=!1}=t,f="",u=-1;const w=Ue([]);Q(e,w,c=>s(5,l=c));let d,h,p="",_=!1;Ce(async()=>{s(15,d=new rt),d.postMessage({answers:g}),s(15,d.onmessage=async({data:c})=>{var X;const{pastGuess:B,results:K}=c;f===B&&(w.set(K),f!==p&&(s(16,p=""),s(17,_=!1)),K.length>0?A(0):A(-1),await O(),a&&((X=document.querySelector(".clue-question.new"))==null||X.scrollIntoView({behavior:"smooth"})))},d)});let z;function ve(){return g.includes(f)}function J(){if(I)return N();if(a){const c=l[u][0];if(r&&c===f.trim()&&s(1,f=c),c!==f){j(c);return}}else if(!p||p!==f)return;Be.update(c=>[...c,f]),ve()?$.set(!0):i<5?(x.update(c=>c+1),N()):$.set(!1)}function A(c){s(2,u=c),c===-1?(h.setAttribute("aria-expanded","false"),h.removeAttribute("aria-activedescendant")):(h.setAttribute("aria-expanded","true"),h.setAttribute("aria-activedescendant","match-"+c))}async function j(c){s(1,f=c),s(16,p=f),s(17,_=!0),await O(),s(6,h.scrollLeft=h.scrollWidth,h)}async function N(){s(1,f=""),s(16,p=""),await O(),h.focus(),h.scrollIntoView({behavior:"smooth",block:"end"})}function Te(c){if(c.key==="Escape"){N();return}if(o&&c.key==="Enter"){c.preventDefault();return}u>=0&&(c.key==="Enter"?(J(),c.preventDefault()):c.key==="ArrowDown"?u<l.length-1&&(A(u+1),c.preventDefault()):c.key==="ArrowUp"&&u>0&&(A(u-1),c.preventDefault()))}ze(()=>{clearTimeout(z),d&&d.terminate()});function ke(){f=this.value,s(1,f)}function Ae(c){We[c?"unshift":"push"](()=>{h=c,s(6,h)})}const De=c=>A(c),Me=(c,B)=>B.button===0&&j(c[0]);return e.$$set=c=>{"answers"in c&&s(14,g=c.answers),"disabled"in c&&s(0,I=c.disabled)},e.$$.update=()=>{if(e.$$.dirty&2&&s(1,f=f.toLowerCase()),e.$$.dirty&196610&&s(4,n=f!==p&&!_&&f.length>=je),e.$$.dirty&48&&s(3,o=n&&l.length===0),e.$$.dirty&24&&(a=n&&!o),e.$$.dirty&65575&&s(7,r=f&&!I&&(f===p||u===0&&f.trim()===l[0][0])),e.$$.dirty&294914)e:{if(!d)break e;clearTimeout(z),s(18,z=setTimeout(()=>{d.postMessage({guess:f})},at))}},[I,f,u,o,n,l,h,r,w,J,A,j,N,Te,g,d,p,_,z,ke,Ae,De,Me]}class wt extends Le{constructor(t){super(),Fe(this,t,lt,ot,Ge,{answers:14,disabled:0})}}export{wt as G,ht as a,P as b,dt as c,oe as d,se as e,mt as g,xe as i,pt as s};
