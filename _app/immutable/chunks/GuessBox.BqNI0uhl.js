import{r as Ge,b as H,w as Ce}from"./entry.DT9djyKd.js";import{v as j,s as ze,e as E,a as G,c as q,b as v,g as C,f as b,p as m,F as O,i as U,h as y,W as x,z as k,X as P,I as we,k as $,o as Ne,B as je,n as ge,D as We,t as F,d as V,j as Oe,Y as Pe,Z as Re,r as Be}from"./scheduler.CpL3koiQ.js";import{F as J,a as be,q as ee,M as te,I as _e,g as Le,w as se}from"./Icon.uAB5gPf3.js";import{S as Fe,i as Ve,a as T,g as ne,t as D,c as re,b as ye,d as Ie,m as Ee,e as qe}from"./index.zgUojP62.js";function oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const Te=[" ","the","e","t","a","of","o","and","i","n","s","e ","r"," th"," t","in","he","th","h","he ","to","l","s ","d"," a","an","er","c"," o","d ","on"," of","re","of ","t ",", ","is","u","at","   ","n ","or","which","f","m","as","it","that","was","en","  "," w","es"," an"," i","f ","g","p","nd"," s","nd ","ed ","w","ed","for","te","ing","y ","The"," c","ti","r ","his","st"," in","ar","nt",","," to","y","ng"," h","with","le","al","to ","b","ou","be","were"," b","se","o ","ent","ha","ng ","their","hi","from"," f","in ","de","ion","me","v",".","ve","all","re ","ri","ro","is ","co","f t","are","ea",". ","her"," m","er "," p","es ","by","they","di","ra","ic","not","s, ","d t","at ","ce","la","h ","ne","as ","tio","on ","n t","io","we"," a ","om",", a","s o","ur","li","ll","ch","had","this","e t","g "," wh","ere"," co","e o","a ","us"," d","ss"," be"," e","s a","ma","one","t t","or ","but","el","so","l ","e s","s,","no","ter"," wa","iv","ho","e a"," r","hat","s t","ns","ch ","wh","tr","ut","have","ly ","ta"," ha"," on","tha","-"," l","ati","en ","pe"," re","there","ass","si"," fo","wa","ec","our","who","its","z","fo","rs","ot","un","im","th ","nc","ate","ver","ad"," we","ly","ee"," n","id"," cl","ac","il","rt"," wi","div","e, "," it","whi"," ma","ge","x","e c","men","I","’","“","”","|","I’m ","You ","ou ",".|"," me.","’m a","how"," am I?"," and ","here"],{push:M}=Array.prototype,{min:Ye}=Math,He=new TextEncoder,ae=new TextDecoder;class K extends Error{constructor(t){super(t),this.name="DecompressError"}}const S=(...e)=>e.join(" "),Je=e=>{const t=new Map;for(const[s,n]of e.entries()){let a=t;const o=n[Symbol.iterator]();for(const r of o){let l=a.get(r);if(!l){const i=new Map;a.set(r,i),l=i}a=l}a.value=s}return t},Ke=(e,t,s)=>{let n=e,a=s;const o=[];do n=n.get(t[a]),n&&(o.push({character:t[a],value:n.value,index:a}),a+=1);while(n&&t[a]);let r=o.length-1;for(;r>0&&o[r].value===void 0;)r-=1;return[o[r]&&o[r].value,(o[r]&&o[r].index||s)+1]},Y=(e,t)=>{const s=[];return t>1?s.push(255,t-1):s.push(254),M.apply(s,e.splice(0,t)),s},Xe=(e,t)=>{const s=[...e],n=s.length,a=[];let o=0;const r=[];for(;o<n;){const[l,i]=Ke(t,s,o);if(l!==void 0){for(;a.length>0;)M.apply(r,Y(a,Ye(256,a.length)));r.push(l)}else for(M.apply(a,He.encode(s[o]));a.length>=256;)M.apply(r,Y(a,256));o=i}a.length>0&&M.apply(r,Y(a,a.length));try{return Uint8Array.of(...r)}catch{return new Uint8Array(r)}},le=(e,t,s)=>{const n=t+1;if(n>=s)throw new K(S(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read at index ${n}.`));return[e.slice(n,n+1),n+1]},Ze=(e,t,s)=>{const n=t+1;if(n>=s)throw new K(S(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read at index ${n}.`));const a=n+1,o=n+e[n]+2;if(o>s)throw new K(S(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read from index ${a} to ${o}.`));return[e.slice(a,o),o]},Qe=(e,t)=>{const s=e.length;let n=0,a="";for(;n<s;){const o=e[n];if(o===254){const[r,l]=le(e,n,s);a+=ae.decode(r),n=l;continue}if(o===255){const r=[];do{const[l,i]=Ze(e,n,s);M.apply(r,l),n=i}while(e[n]===255);if(e[n]===254){const[l,i]=le(e,n,s);r.push(l),n=i}a+=ae.decode(Uint8Array.of(...r));continue}a+=t[o],n+=1}return a},ve=({dictionary:e}={})=>{if(!Array.isArray(e)||e.length>254)throw new TypeError(S("The `dictionary` option must be an array with at most 254 elements.",Array.isArray(e)?`It has ${e.length} elements.`:`It is \`${e==null?e:e.constructor.name}\`.`));const t=Je(e);return{compress(s){if(typeof s!="string")throw new TypeError(S("The `string` argument must be of type ’string’.",`Its type is \`${typeof s}\`.`));return Xe(s,t)},decompress(s){if(s==null||s.constructor.name!=="Uint8Array")throw new TypeError(S("The `buffer` argument must be an instance of ’Uint8Array’.",`It is ${s==null?`\`${s}\``:`an instance of \`${s.constructor.name}\``}.`));return Qe(s,e)}}};async function mt(e,t){let s;const n=e.slice(0,4);if(n!==t.slice(0,4)?s=await(await fetch(`${H}/questions-${n}.json`)).json():s=await(await fetch(`${H}/questions.json`,{headers:{"Cache-Control":"no-cache"}})).json(),s[e]&&s[e].answers){const o=s[e].answers.split(be);return W({...s[e],answers:o})}else return null}function xe(e){return e.trim().toLowerCase()}function W(e){return{q1:e.q1.trim(),q2:e.q2.trim(),q3:e.q3.trim(),q4:e.q4.trim(),q5:e.q5.trim(),answers:e.answers.map(t=>xe(t)),prompt:e.prompt.trim(),...e.message&&{message:e.message.trim()}}}function $e(e){return!!(e&&e.answers&&e.answers.every(t=>t)&&e.prompt&&e.q1&&e.q2&&e.q3&&e.q4&&e.q5)}async function dt(e=!1){const s=new URL(window.location.href).searchParams.get("game");if(s)try{const[n,a]=et(s);if($e(n))return e&&a&&(async()=>(await j(),Ge(a,{})))(),n;throw new Error("Invalid custom game.")}catch{throw new Error("Invalid custom game.")}return null}function et(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),s=atob(t),n=Uint8Array.from(s,l=>l.codePointAt(0)??0);let a,o,r;try{a=rt(n),o=W(ce(a))}catch{try{a=new TextDecoder().decode(n),o=W(ce(a)),r=ie(o)}catch{a=new TextDecoder().decode(n),o=W(JSON.parse(a)),r=ie(o)}}return[o,r]}function ie(e){return`${H}/?game=${tt(nt(st(e)))}`}function tt(e){let t;e instanceof Uint8Array?t=e:t=new TextEncoder().encode(e);const s=Array.from(t,o=>String.fromCodePoint(o)).join("");return btoa(s).replace(/\+/g,"-").replace(/\//g,"_")}function st(e){let t=[e.q1,e.q2,e.q3,e.q4,e.q5,e.answers.join(",")];return e.prompt==="What am I?"?e.message&&t.push("",e.message):(t.push(e.prompt),e.message&&t.push(e.message)),t.join(J)}function ce(e){if(!e.includes(J))throw new Error("Invalid minified game: no | separator");const t=e.split(J);if(t.length<6)throw new Error("Invalid minified game: too few fields");const[s,n,a,o,r,l,i,g]=t;return{q1:s,q2:n,q3:a,q4:o,q5:r,answers:l.split(be),prompt:i||"What am I?",...g&&{message:g}}}function nt(e){const{compress:t}=ve({dictionary:Te});return t(e)}function rt(e){const{decompress:t}=ve({dictionary:Te});return t(e)}function pt(e){const t=e-1;return t*t*t+1}function wt(e){return-.5*(Math.cos(Math.PI*e)-1)}function ot(e){return new Worker(""+new URL("../workers/autocomplete.worker-sidEUWyp.js",import.meta.url).href,{type:"module",name:e==null?void 0:e.name})}function ue(e,t,s){const n=e.slice();return n[27]=t[s],n[29]=s,n}function fe(e){let t,s,n,a,o;return s=new _e({props:{image:"arrow",color:"var(--color-accent-1)",alt:"guess"}}),{c(){t=E("button"),ye(s.$$.fragment),this.h()},l(r){t=q(r,"BUTTON",{id:!0,class:!0});var l=v(t);Ie(s.$$.fragment,l),l.forEach(b),this.h()},h(){m(t,"id","guess-btn"),m(t,"class","icon svelte-10t2zie")},m(r,l){U(r,t,l),Ee(s,t,null),n=!0,a||(o=k(t,"click",P(e[9])),a=!0)},p:ge,i(r){n||(T(s.$$.fragment,r),n=!0)},o(r){D(s.$$.fragment,r),n=!1},d(r){r&&b(t),qe(s),a=!1,o()}}}function he(e){let t,s,n,a,o;return s=new _e({props:{image:"cross",color:"var(--color-text-3)",alt:"clear"}}),{c(){t=E("button"),ye(s.$$.fragment),this.h()},l(r){t=q(r,"BUTTON",{id:!0,class:!0});var l=v(t);Ie(s.$$.fragment,l),l.forEach(b),this.h()},h(){m(t,"id","clear-btn"),m(t,"class","icon svelte-10t2zie")},m(r,l){U(r,t,l),Ee(s,t,null),n=!0,a||(o=k(t,"click",P(e[12])),a=!0)},p:ge,i(r){n||(T(s.$$.fragment,r),n=!0)},o(r){D(s.$$.fragment,r),n=!1},d(r){r&&b(t),qe(s),a=!1,o()}}}function me(e){let t,s,n=e[3]&&de(e),a=oe(e[5]),o=[];for(let r=0;r<a.length;r+=1)o[r]=pe(ue(e,a,r));return{c(){t=E("ul"),n&&n.c(),s=G();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){t=q(r,"UL",{id:!0,role:!0,class:!0});var l=v(t);n&&n.l(l),s=C(l);for(let i=0;i<o.length;i+=1)o[i].l(l);l.forEach(b),this.h()},h(){m(t,"id","matches"),m(t,"role","listbox"),m(t,"class","svelte-10t2zie")},m(r,l){U(r,t,l),n&&n.m(t,null),y(t,s);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(t,null)},p(r,l){if(r[3]?n?n.p(r,l):(n=de(r),n.c(),n.m(t,s)):n&&(n.d(1),n=null),l&3108){a=oe(r[5]);let i;for(i=0;i<a.length;i+=1){const g=ue(r,a,i);o[i]?o[i].p(g,l):(o[i]=pe(g),o[i].c(),o[i].m(t,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=a.length}},d(r){r&&b(t),n&&n.d(),We(o,r)}}}function de(e){let t,s,n,a,o;return{c(){t=E("li"),s=F("no results for "),n=E("span"),a=F(e[1]),o=F(", try something else"),this.h()},l(r){t=q(r,"LI",{class:!0});var l=v(t);s=V(l,"no results for "),n=q(l,"SPAN",{class:!0});var i=v(n);a=V(i,e[1]),i.forEach(b),o=V(l,", try something else"),l.forEach(b),this.h()},h(){m(n,"class","no-matches-guess svelte-10t2zie"),m(t,"class","match no-matches svelte-10t2zie")},m(r,l){U(r,t,l),y(t,s),y(t,n),y(n,a),y(t,o)},p(r,l){l&2&&Oe(a,r[1])},d(r){r&&b(t)}}}function pe(e){let t,s,n=e[27][1]+"",a,o,r,l,i;function g(){return e[22](e[29])}function I(...f){return e[23](e[27],...f)}return{c(){t=E("li"),s=new Pe(!1),a=G(),this.h()},l(f){t=q(f,"LI",{id:!0,class:!0,role:!0,tabindex:!0,"aria-selected":!0});var u=v(t);s=Re(u,!1),a=C(u),u.forEach(b),this.h()},h(){s.a=a,m(t,"id","match-"+e[29]),m(t,"class",o=O("match"+(e[29]===e[2]?" selected":""))+" svelte-10t2zie"),m(t,"role","option"),m(t,"tabindex",e[29]),m(t,"aria-selected",r=e[29]===e[2]?"true":"false")},m(f,u){U(f,t,u),s.m(n,t),y(t,a),l||(i=[k(t,"mouseenter",g),k(t,"mousedown",P(I))],l=!0)},p(f,u){e=f,u&32&&n!==(n=e[27][1]+"")&&s.p(n),u&4&&o!==(o=O("match"+(e[29]===e[2]?" selected":""))+" svelte-10t2zie")&&m(t,"class",o),u&4&&r!==(r=e[29]===e[2]?"true":"false")&&m(t,"aria-selected",r)},d(f){f&&b(t),l=!1,we(i)}}}function at(e){let t,s,n,a,o,r,l,i,g,I,f,u=e[7]&&fe(e),w=e[1].length>0&&he(e),d=e[4]&&me(e);return{c(){t=E("form"),s=E("div"),n=E("input"),r=G(),u&&u.c(),l=G(),w&&w.c(),i=G(),d&&d.c(),this.h()},l(h){t=q(h,"FORM",{});var p=v(t);s=q(p,"DIV",{id:!0,class:!0});var _=v(s);n=q(_,"INPUT",{type:!0,list:!0,id:!0,class:!0,autocomplete:!0,placeholder:!0,"aria-autocomplete":!0,"aria-expanded":!0,"aria-controls":!0,"aria-label":!0}),r=C(_),u&&u.l(_),l=C(_),w&&w.l(_),_.forEach(b),i=C(p),d&&d.l(p),p.forEach(b),this.h()},h(){m(n,"type","search"),m(n,"list","guess-autocomplete"),m(n,"id","guess"),m(n,"class",a=O(e[7]?"can-submit":"")+" svelte-10t2zie"),m(n,"autocomplete","off"),n.autofocus=o=!e[0],n.required=!0,m(n,"placeholder","Type a guess"),m(n,"aria-autocomplete","list"),m(n,"aria-expanded","false"),m(n,"aria-controls","matches"),m(n,"aria-label","Type a guess"),m(s,"id","search-box"),m(s,"class","svelte-10t2zie")},m(h,p){U(h,t,p),y(t,s),y(s,n),x(n,e[1]),e[21](n),y(s,r),u&&u.m(s,null),y(s,l),w&&w.m(s,null),y(t,i),d&&d.m(t,null),g=!0,e[0]||n.focus(),I||(f=[k(n,"input",e[20]),k(n,"keydown",e[13]),k(t,"submit",P(e[9]))],I=!0)},p(h,[p]){(!g||p&128&&a!==(a=O(h[7]?"can-submit":"")+" svelte-10t2zie"))&&m(n,"class",a),(!g||p&1&&o!==(o=!h[0]))&&(n.autofocus=o),p&2&&n.value!==h[1]&&x(n,h[1]),h[7]?u?(u.p(h,p),p&128&&T(u,1)):(u=fe(h),u.c(),T(u,1),u.m(s,l)):u&&(ne(),D(u,1,1,()=>{u=null}),re()),h[1].length>0?w?(w.p(h,p),p&2&&T(w,1)):(w=he(h),w.c(),T(w,1),w.m(s,null)):w&&(ne(),D(w,1,1,()=>{w=null}),re()),h[4]?d?d.p(h,p):(d=me(h),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(h){g||(T(u),T(w),g=!0)},o(h){D(u),D(w),g=!1},d(h){h&&b(t),e[21](null),u&&u.d(),w&&w.d(),d&&d.d(),I=!1,we(f)}}}const lt=10;function it(e,t,s){let n,a,o,r,l,i;$(e,ee,c=>s(25,i=c));let{answers:g}=t,{disabled:I=!1}=t,f="",u=-1;const w=Ce([]);$(e,w,c=>s(5,l=c));let d,h,p="",_=!1,R=te;Ne(async()=>{s(18,R=Math.min(te,...g.map(c=>c.length))),s(15,d=new ot),d.postMessage({answers:g}),s(15,d.onmessage=async({data:c})=>{var Q;const{pastGuess:L,results:Z}=c;f===L&&(w.set(Z),f!==p&&(s(16,p=""),s(17,_=!1)),Z.length>0?A(0):A(-1),await j(),o&&((Q=document.querySelector(".clue-question.new"))==null||Q.scrollIntoView({behavior:"smooth"})))},d)});let z;function ke(){return g.includes(f)}function X(){if(I)return N();if(o){const c=l[u][0];if(r&&c===f.trim()&&s(1,f=c),c!==f){B(c);return}}else if(!p||p!==f)return;Le.update(c=>[...c,f]),ke()?se.set(!0):i<5?(ee.update(c=>c+1),N()):se.set(!1)}function A(c){s(2,u=c),c===-1?(h.setAttribute("aria-expanded","false"),h.removeAttribute("aria-activedescendant")):(h.setAttribute("aria-expanded","true"),h.setAttribute("aria-activedescendant","match-"+c))}async function B(c){s(1,f=c),s(16,p=f),s(17,_=!0),await j(),s(6,h.scrollLeft=h.scrollWidth,h)}async function N(){s(1,f=""),s(16,p=""),await j(),h.focus(),h.scrollIntoView({behavior:"smooth",block:"end"})}function Ae(c){if(c.key==="Escape"){N();return}if(a&&c.key==="Enter"){c.preventDefault();return}u>=0&&(c.key==="Enter"?(X(),c.preventDefault()):c.key==="ArrowDown"?u<l.length-1&&(A(u+1),c.preventDefault()):c.key==="ArrowUp"&&u>0&&(A(u-1),c.preventDefault()))}je(()=>{clearTimeout(z),d&&d.terminate()});function De(){f=this.value,s(1,f)}function Me(c){Be[c?"unshift":"push"](()=>{h=c,s(6,h)})}const Se=c=>A(c),Ue=(c,L)=>L.button===0&&B(c[0]);return e.$$set=c=>{"answers"in c&&s(14,g=c.answers),"disabled"in c&&s(0,I=c.disabled)},e.$$.update=()=>{if(e.$$.dirty&2&&s(1,f=f.toLowerCase()),e.$$.dirty&458754&&s(4,n=f!==p&&!_&&f.length>=R),e.$$.dirty&48&&s(3,a=n&&l.length===0),e.$$.dirty&24&&(o=n&&!a),e.$$.dirty&65575&&s(7,r=f&&!I&&(f===p||u===0&&f.trim()===l[0][0])),e.$$.dirty&557058)e:{if(!d)break e;clearTimeout(z),s(19,z=setTimeout(()=>{d.postMessage({guess:f})},lt))}},[I,f,u,a,n,l,h,r,w,X,A,B,N,Ae,g,d,p,_,R,z,De,Me,Se,Ue]}class gt extends Fe{constructor(t){super(),Ve(this,t,it,at,ze,{answers:14,disabled:0})}}export{gt as G,mt as a,W as b,pt as c,ie as d,oe as e,dt as g,$e as i,wt as s};
