import{b as de,w as ve}from"./paths.DOd7qdf6.js";import{A as pe,q as x,I as we,g as Te,w as $}from"./consts.DEhDpg4m.js";import{G as X,s as Ee,e as M,a as V,c as D,b as j,g as L,f as I,p as d,D as z,i as R,h as B,U as ee,z as U,V as F,k as te,o as Ae,v as Y,W as Me,n as ge,B as De,X as Ue,Y as Se,r as Ge}from"./scheduler.B-xZ3qQn.js";import{t as A,a as T,S as Ce,i as Be,g as se,c as ne,b as be,d as _e,m as ye,e as ke}from"./index.Dx8bAGDY.js";function re(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function tt(e,s){A(e,1,1,()=>{s.delete(e.key)})}function st(e,s,t,n,o,a,r,l,p,f,b,_){let i=e.length,c=a.length,h=i;const m={};for(;h--;)m[e[h].key]=h;const w=[],y=new Map,S=new Map,v=[];for(h=c;h--;){const g=_(o,a,h),k=t(g);let q=r.get(k);q?v.push(()=>q.p(g,s)):(q=f(k,g),q.c()),y.set(k,w[h]=q),k in m&&S.set(k,Math.abs(h-m[k]))}const G=new Set,E=new Set;function N(g){T(g,1),g.m(l,b),r.set(g.key,g),b=g.first,c--}for(;i&&c;){const g=w[c-1],k=e[i-1],q=g.key,C=k.key;g===k?(b=g.first,i--,c--):y.has(C)?!r.has(q)||G.has(q)?N(g):E.has(C)?i--:S.get(q)>S.get(C)?(E.add(q),N(g)):(G.add(C),i--):(p(k,r),i--)}for(;i--;){const g=e[i];y.has(g.key)||p(g,r)}for(;c;)N(w[c-1]);return X(v),w}const{push:W}=Array.prototype,{min:We}=Math,Oe=new TextEncoder,oe=new TextDecoder;class K extends Error{constructor(s){super(s),this.name="DecompressError"}}const O=(...e)=>e.join(" "),je=e=>{const s=new Map;for(const[t,n]of e.entries()){let o=s;const a=n[Symbol.iterator]();for(const r of a){let l=o.get(r);if(!l){const p=new Map;o.set(r,p),l=p}o=l}o.value=t}return s},Ne=(e,s,t)=>{let n=e,o=t;const a=[];do n=n.get(s[o]),n&&(a.push({character:s[o],value:n.value,index:o}),o+=1);while(n&&s[o]);let r=a.length-1;for(;r>0&&a[r].value===void 0;)r-=1;return[a[r]&&a[r].value,(a[r]&&a[r].index||t)+1]},J=(e,s)=>{const t=[];return s>1?t.push(255,s-1):t.push(254),W.apply(t,e.splice(0,s)),t},Re=(e,s)=>{const t=[...e],n=t.length,o=[];let a=0;const r=[];for(;a<n;){const[l,p]=Ne(s,t,a);if(l!==void 0){for(;o.length>0;)W.apply(r,J(o,We(256,o.length)));r.push(l)}else for(W.apply(o,Oe.encode(t[a]));o.length>=256;)W.apply(r,J(o,256));a=p}o.length>0&&W.apply(r,J(o,o.length));try{return Uint8Array.of(...r)}catch{return new Uint8Array(r)}},ae=(e,s,t)=>{const n=s+1;if(n>=t)throw new K(O(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read at index ${n}.`));return[e.slice(n,n+1),n+1]},Ve=(e,s,t)=>{const n=s+1;if(n>=t)throw new K(O(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read at index ${n}.`));const o=n+1,a=n+e[n]+2;if(a>t)throw new K(O(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read from index ${o} to ${a}.`));return[e.slice(o,a),a]},Le=(e,s)=>{const t=e.length;let n=0,o="";for(;n<t;){const a=e[n];if(a===254){const[r,l]=ae(e,n,t);o+=oe.decode(r),n=l;continue}if(a===255){const r=[];do{const[l,p]=Ve(e,n,t);W.apply(r,l),n=p}while(e[n]===255);if(e[n]===254){const[l,p]=ae(e,n,t);r.push(l),n=p}o+=oe.decode(Uint8Array.of(...r));continue}o+=s[a],n+=1}return o},qe=({dictionary:e}={})=>{if(!Array.isArray(e)||e.length>254)throw new TypeError(O("The `dictionary` option must be an array with at most 254 elements.",Array.isArray(e)?`It has ${e.length} elements.`:`It is \`${e==null?e:e.constructor.name}\`.`));const s=je(e);return{compress(t){if(typeof t!="string")throw new TypeError(O("The `string` argument must be of type ’string’.",`Its type is \`${typeof t}\`.`));return Re(t,s)},decompress(t){if(t==null||t.constructor.name!=="Uint8Array")throw new TypeError(O("The `buffer` argument must be an instance of ’Uint8Array’.",`It is ${t==null?`\`${t}\``:`an instance of \`${t.constructor.name}\``}.`));return Le(t,e)}}},Ie=[" ","the","e","t","a","of","o","and","i","n","s","e ","r"," th"," t","in","he","th","h","he ","to","l","s ","d"," a","an","er","c"," o","d ","on"," of","re","of ","t ",", ","is","u","at","   ","n ","or","which","f","m","as","it","that","was","en","  "," w","es"," an"," i","f ","g","p","nd"," s","nd ","ed ","w","ed","for","te","ing","y ","The"," c","ti","r ","his","st"," in","ar","nt",","," to","y","ng"," h","with","le","al","to ","b","ou","be","were"," b","se","o ","ent","ha","ng ","their","hi","from"," f","in ","de","ion","me","v",".","ve","all","re ","ri","ro","is ","co","f t","are","ea",". ","her"," m","er "," p","es ","by","they","di","ra","ic","not","s, ","d t","at ","ce","la","h ","ne","as ","tio","on ","n t","io","we"," a ","om",", a","s o","ur","li","ll","ch","had","this","e t","g "," wh","ere"," co","e o","a ","us"," d","ss"," be"," e","s a","ma","one","t t","or ","but","el","so","l ","e s","s,","no","ter"," wa","iv","ho","e a"," r","hat","s t","ns","ch ","wh","tr","ut","have","ly ","ta"," ha"," on","tha","-"," l","ati","en ","pe"," re","there","ass","si"," fo","wa","ec","our","who","its","z","fo","rs","ot","un","im","th ","nc","ate","ver","ad"," we","ly","ee"," n","id"," cl","ac","il","rt"," wi","div","e, "," it","whi"," ma","ge","x","e c","men","I","’","“","”","|","I’m ","You ","ou ",".|"," me.","’m a","how"," am I?"," and ","here"];async function nt(e){const t=await(await fetch(`${de}/questions.json`)).json();if(t[e]&&t[e].answers){const n=t[e].answers.split(pe);return P({...t[e],answers:n})}else return null}function Pe(e){return e.trim().toLowerCase()}function P(e){return{q1:e.q1.trim(),q2:e.q2.trim(),q3:e.q3.trim(),q4:e.q4.trim(),q5:e.q5.trim(),answers:e.answers.map(s=>Pe(s)),prompt:e.prompt.trim(),...e.message&&{message:e.message.trim()}}}function rt(e){return!!(e&&e.answers&&e.answers.every(s=>s)&&e.prompt&&e.q1&&e.q2&&e.q3&&e.q4&&e.q5)}function ot(e){const s=e.replace(/-/g,"+").replace(/_/g,"/"),t=atob(s),n=Uint8Array.from(t,l=>l.codePointAt(0)??0);let o,a,r;try{o=Ye(n),a=P(le(o))}catch{try{o=new TextDecoder().decode(n),a=P(le(o)),r=ie(a)}catch{o=new TextDecoder().decode(n),a=P(JSON.parse(o)),r=ie(a)}}return[a,r]}function ie(e){return`${de}/?game=${ze(He(Fe(e)))}`}function ze(e){let s;e instanceof Uint8Array?s=e:s=new TextEncoder().encode(e);const t=Array.from(s,a=>String.fromCodePoint(a)).join("");return btoa(t).replace(/\+/g,"-").replace(/\//g,"_")}function Fe(e){let s=[e.q1,e.q2,e.q3,e.q4,e.q5,e.answers.join(",")];return e.prompt==="What am I?"?e.message&&s.push("",e.message):(s.push(e.prompt),e.message&&s.push(e.message)),s.join("|")}function le(e){if(!e.includes("|"))throw new Error("Invalid minified game: no | separator");const s=e.split("|");if(s.length<6)throw new Error("Invalid minified game: too few fields");const[t,n,o,a,r,l,p,f]=s;return{q1:t,q2:n,q3:o,q4:a,q5:r,answers:l.split(pe),prompt:p||"What am I?",...f&&{message:f}}}function He(e){const{compress:s}=qe({dictionary:Ie});return s(e)}function Ye(e){const{decompress:s}=qe({dictionary:Ie});return s(e)}function at(e){const s=e-1;return s*s*s+1}function it(e){return-.5*(Math.cos(Math.PI*e)-1)}function Je(e){return new Worker(""+new URL("../workers/autocomplete.worker-kgBEELdR.js",import.meta.url).href,{type:"module",name:e==null?void 0:e.name})}function ce(e,s,t){const n=e.slice();return n[24]=s[t],n[26]=t,n}function ue(e){let s,t,n,o,a;return t=new we({props:{image:"arrow",color:"var(--color-accent-1)",alt:"guess"}}),{c(){s=M("button"),be(t.$$.fragment),this.h()},l(r){s=D(r,"BUTTON",{id:!0,class:!0});var l=j(s);_e(t.$$.fragment,l),l.forEach(I),this.h()},h(){d(s,"id","guess-btn"),d(s,"class","icon svelte-17htsum")},m(r,l){R(r,s,l),ye(t,s,null),n=!0,o||(a=U(s,"click",F(e[8])),o=!0)},p:ge,i(r){n||(T(t.$$.fragment,r),n=!0)},o(r){A(t.$$.fragment,r),n=!1},d(r){r&&I(s),ke(t),o=!1,a()}}}function fe(e){let s,t,n,o,a;return t=new we({props:{image:"cross",color:"var(--color-text-3)",alt:"clear"}}),{c(){s=M("button"),be(t.$$.fragment),this.h()},l(r){s=D(r,"BUTTON",{id:!0,class:!0});var l=j(s);_e(t.$$.fragment,l),l.forEach(I),this.h()},h(){d(s,"id","clear-btn"),d(s,"class","icon svelte-17htsum")},m(r,l){R(r,s,l),ye(t,s,null),n=!0,o||(a=U(s,"click",F(e[11])),o=!0)},p:ge,i(r){n||(T(t.$$.fragment,r),n=!0)},o(r){A(t.$$.fragment,r),n=!1},d(r){r&&I(s),ke(t),o=!1,a()}}}function he(e){let s,t=re(e[3]),n=[];for(let o=0;o<t.length;o+=1)n[o]=me(ce(e,t,o));return{c(){s=M("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){s=D(o,"UL",{id:!0,role:!0,class:!0});var a=j(s);for(let r=0;r<n.length;r+=1)n[r].l(a);a.forEach(I),this.h()},h(){d(s,"id","matches"),d(s,"role","listbox"),d(s,"class","svelte-17htsum")},m(o,a){R(o,s,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,null)},p(o,a){if(a&1548){t=re(o[3]);let r;for(r=0;r<t.length;r+=1){const l=ce(o,t,r);n[r]?n[r].p(l,a):(n[r]=me(l),n[r].c(),n[r].m(s,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(o){o&&I(s),De(n,o)}}}function me(e){let s,t,n=e[24][1]+"",o,a,r,l,p;function f(){return e[20](e[26])}function b(..._){return e[21](e[24],..._)}return{c(){s=M("li"),t=new Ue(!1),o=V(),this.h()},l(_){s=D(_,"LI",{id:!0,class:!0,role:!0,tabindex:!0,"aria-selected":!0});var i=j(s);t=Se(i,!1),o=L(i),i.forEach(I),this.h()},h(){t.a=o,d(s,"id","match-"+e[26]),d(s,"class",a=z("match"+(e[26]===e[2]?" selected":""))+" svelte-17htsum"),d(s,"role","option"),d(s,"tabindex",e[26]),d(s,"aria-selected",r=e[26]===e[2]?"true":"false")},m(_,i){R(_,s,i),t.m(n,s),B(s,o),l||(p=[U(s,"mouseenter",f),U(s,"mousedown",F(b))],l=!0)},p(_,i){e=_,i&8&&n!==(n=e[24][1]+"")&&t.p(n),i&4&&a!==(a=z("match"+(e[26]===e[2]?" selected":""))+" svelte-17htsum")&&d(s,"class",a),i&4&&r!==(r=e[26]===e[2]?"true":"false")&&d(s,"aria-selected",r)},d(_){_&&I(s),l=!1,X(p)}}}function Ke(e){let s,t,n,o,a,r,l,p,f,b,_,i=e[5]&&ue(e),c=e[1].length>0&&fe(e),h=e[6]&&he(e);return{c(){s=M("form"),t=M("div"),n=M("input"),r=V(),i&&i.c(),l=V(),c&&c.c(),p=V(),h&&h.c(),this.h()},l(m){s=D(m,"FORM",{});var w=j(s);t=D(w,"DIV",{id:!0,class:!0});var y=j(t);n=D(y,"INPUT",{type:!0,list:!0,id:!0,class:!0,autocomplete:!0,placeholder:!0,"aria-autocomplete":!0,"aria-expanded":!0,"aria-controls":!0,"aria-label":!0}),r=L(y),i&&i.l(y),l=L(y),c&&c.l(y),y.forEach(I),p=L(w),h&&h.l(w),w.forEach(I),this.h()},h(){d(n,"type","search"),d(n,"list","guess-autocomplete"),d(n,"id","guess"),d(n,"class",o=z(e[5]?"can-submit":"")+" svelte-17htsum"),d(n,"autocomplete","off"),n.autofocus=a=!e[0],n.required=!0,d(n,"placeholder","Type a guess"),d(n,"aria-autocomplete","list"),d(n,"aria-expanded","false"),d(n,"aria-controls","matches"),d(n,"aria-label","Type a guess"),d(t,"id","search-box"),d(t,"class","svelte-17htsum")},m(m,w){R(m,s,w),B(s,t),B(t,n),ee(n,e[1]),e[19](n),B(t,r),i&&i.m(t,null),B(t,l),c&&c.m(t,null),B(s,p),h&&h.m(s,null),f=!0,e[0]||n.focus(),b||(_=[U(n,"input",e[18]),U(n,"keydown",e[12]),U(s,"submit",F(e[8]))],b=!0)},p(m,[w]){(!f||w&32&&o!==(o=z(m[5]?"can-submit":"")+" svelte-17htsum"))&&d(n,"class",o),(!f||w&1&&a!==(a=!m[0]))&&(n.autofocus=a),w&2&&n.value!==m[1]&&ee(n,m[1]),m[5]?i?(i.p(m,w),w&32&&T(i,1)):(i=ue(m),i.c(),T(i,1),i.m(t,l)):i&&(se(),A(i,1,1,()=>{i=null}),ne()),m[1].length>0?c?(c.p(m,w),w&2&&T(c,1)):(c=fe(m),c.c(),T(c,1),c.m(t,null)):c&&(se(),A(c,1,1,()=>{c=null}),ne()),m[6]?h?h.p(m,w):(h=he(m),h.c(),h.m(s,null)):h&&(h.d(1),h=null)},i(m){f||(T(i),T(c),f=!0)},o(m){A(i),A(c),f=!1},d(m){m&&I(s),e[19](null),i&&i.d(),c&&c.d(),h&&h.d(),b=!1,X(_)}}}const Xe=10;function Qe(e,s,t){let n,o,a,r;te(e,x,u=>t(22,r=u));let{answers:l}=s,{disabled:p=!1}=s,f="",b=-1;const _=ve([]);te(e,_,u=>t(3,a=u));let i,c,h="",m=!1;Ae(async()=>{t(14,i=new Je),i.postMessage({answers:l}),t(14,i.onmessage=async({data:u})=>{var Z;const{pastGuess:H,results:Q}=u;f===H&&(_.set(Q),f!==h&&(t(15,h=""),t(16,m=!1)),Q.length>0?v(0):v(-1),await Y(),n&&((Z=document.querySelector(".clue-question.new"))==null||Z.scrollIntoView({behavior:"smooth"})))},i)});let w;function y(){return l.includes(f)}function S(){if(p)return E();if(n){const u=a[b][0];if(o&&u===f.trim()&&t(1,f=u),u!==f){G(u);return}}else if(!h||h!==f)return;Te.update(u=>[...u,f]),y()?$.set(!0):r<5?(x.update(u=>u+1),E()):$.set(!1)}function v(u){t(2,b=u),u===-1?(c.setAttribute("aria-expanded","false"),c.removeAttribute("aria-activedescendant")):(c.setAttribute("aria-expanded","true"),c.setAttribute("aria-activedescendant","match-"+u))}async function G(u){t(1,f=u),t(15,h=f),t(16,m=!0),await Y(),t(4,c.scrollLeft=c.scrollWidth,c)}async function E(){t(1,f=""),t(15,h=""),await Y(),c.focus(),c.scrollIntoView({behavior:"smooth",block:"end"})}function N(u){b>=0&&(u.key==="Enter"?(S(),u.preventDefault()):u.key==="ArrowDown"?b<a.length-1&&(v(b+1),u.preventDefault()):u.key==="ArrowUp"?b>0&&(v(b-1),u.preventDefault()):u.key==="Escape"&&E())}Me(()=>{clearTimeout(w),i&&i.terminate()});function g(){f=this.value,t(1,f)}function k(u){Ge[u?"unshift":"push"](()=>{c=u,t(4,c)})}const q=u=>v(u),C=(u,H)=>H.button===0&&G(u[0]);return e.$$set=u=>{"answers"in u&&t(13,l=u.answers),"disabled"in u&&t(0,p=u.disabled)},e.$$.update=()=>{if(e.$$.dirty&2&&t(1,f=f.toLowerCase()),e.$$.dirty&98314&&t(6,n=f!==h&&!m&&a.length>0),e.$$.dirty&32783&&t(5,o=f&&!p&&(f===h||b===0&&f.trim()===a[0][0])),e.$$.dirty&147458)e:{if(!i)break e;clearTimeout(w),t(17,w=setTimeout(()=>{i.postMessage({guess:f})},Xe))}},[p,f,b,a,c,o,n,_,S,v,G,E,N,l,i,h,m,w,g,k,q,C]}class lt extends Ce{constructor(s){super(),Be(this,s,Qe,Ke,Ee,{answers:13,disabled:0})}}export{lt as G,ot as a,P as b,at as c,ie as d,re as e,nt as g,rt as i,tt as o,it as s,st as u};
