import{b as z,r as Ue,w as je}from"./entry.DD0C5fwL.js";import{v as N,s as Ge,e as I,a as j,c as T,b as k,g as G,f as b,p as m,F as R,i as U,h as y,W as $,z as v,X as W,I as ge,k as ee,o as ze,B as Le,n as be,D as Oe,t as V,d as H,j as Ne,Y as Re,Z as Pe,r as We}from"./scheduler.CpL3koiQ.js";import{a as P,F as K,b as Be,q as te,M as se,I as _e,g as Fe,w as ne}from"./Icon.CelBsBf5.js";import{S as Ye,i as Ve,a as E,g as re,t as S,c as oe,b as ye,d as qe,m as Ie,e as Te}from"./index.zgUojP62.js";function ae(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const Ee=[" ","the","e","t","a","of","o","and","i","n","s","e ","r"," th"," t","in","he","th","h","he ","to","l","s ","d"," a","an","er","c"," o","d ","on"," of","re","of ","t ",", ","is","u","at","   ","n ","or","which","f","m","as","it","that","was","en","  "," w","es"," an"," i","f ","g","p","nd"," s","nd ","ed ","w","ed","for","te","ing","y ","The"," c","ti","r ","his","st"," in","ar","nt",","," to","y","ng"," h","with","le","al","to ","b","ou","be","were"," b","se","o ","ent","ha","ng ","their","hi","from"," f","in ","de","ion","me","v",".","ve","all","re ","ri","ro","is ","co","f t","are","ea",". ","her"," m","er "," p","es ","by","they","di","ra","ic","not","s, ","d t","at ","ce","la","h ","ne","as ","tio","on ","n t","io","we"," a ","om",", a","s o","ur","li","ll","ch","had","this","e t","g "," wh","ere"," co","e o","a ","us"," d","ss"," be"," e","s a","ma","one","t t","or ","but","el","so","l ","e s","s,","no","ter"," wa","iv","ho","e a"," r","hat","s t","ns","ch ","wh","tr","ut","have","ly ","ta"," ha"," on","tha","-"," l","ati","en ","pe"," re","there","ass","si"," fo","wa","ec","our","who","its","z","fo","rs","ot","un","im","th ","nc","ate","ver","ad"," we","ly","ee"," n","id"," cl","ac","il","rt"," wi","div","e, "," it","whi"," ma","ge","x","e c","men","I","’","“","”","|","I’m ","You ","ou ",".|"," me.","’m a","how"," am I?"," and ","here"],{push:D}=Array.prototype,{min:He}=Math,Je=new TextEncoder,ie=new TextDecoder;class X extends Error{constructor(s){super(s),this.name="DecompressError"}}const C=(...e)=>e.join(" "),Ke=e=>{const s=new Map;for(const[t,n]of e.entries()){let a=s;const o=n[Symbol.iterator]();for(const r of o){let i=a.get(r);if(!i){const l=new Map;a.set(r,l),i=l}a=i}a.value=t}return s},Xe=(e,s,t)=>{let n=e,a=t;const o=[];do n=n.get(s[a]),n&&(o.push({character:s[a],value:n.value,index:a}),a+=1);while(n&&s[a]);let r=o.length-1;for(;r>0&&o[r].value===void 0;)r-=1;return[o[r]&&o[r].value,(o[r]&&o[r].index||t)+1]},J=(e,s)=>{const t=[];return s>1?t.push(255,s-1):t.push(254),D.apply(t,e.splice(0,s)),t},Ze=(e,s)=>{const t=[...e],n=t.length,a=[];let o=0;const r=[];for(;o<n;){const[i,l]=Xe(s,t,o);if(i!==void 0){for(;a.length>0;)D.apply(r,J(a,He(256,a.length)));r.push(i)}else for(D.apply(a,Je.encode(t[o]));a.length>=256;)D.apply(r,J(a,256));o=l}a.length>0&&D.apply(r,J(a,a.length));try{return Uint8Array.of(...r)}catch{return new Uint8Array(r)}},le=(e,s,t)=>{const n=s+1;if(n>=t)throw new X(C(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read at index ${n}.`));return[e.slice(n,n+1),n+1]},Qe=(e,s,t)=>{const n=s+1;if(n>=t)throw new X(C(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read at index ${n}.`));const a=n+1,o=n+e[n]+2;if(o>t)throw new X(C(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read from index ${a} to ${o}.`));return[e.slice(a,o),o]},xe=(e,s)=>{const t=e.length;let n=0,a="";for(;n<t;){const o=e[n];if(o===254){const[r,i]=le(e,n,t);a+=ie.decode(r),n=i;continue}if(o===255){const r=[];do{const[i,l]=Qe(e,n,t);D.apply(r,i),n=l}while(e[n]===255);if(e[n]===254){const[i,l]=le(e,n,t);r.push(i),n=l}a+=ie.decode(Uint8Array.of(...r));continue}a+=s[o],n+=1}return a},ke=({dictionary:e}={})=>{if(!Array.isArray(e)||e.length>254)throw new TypeError(C("The `dictionary` option must be an array with at most 254 elements.",Array.isArray(e)?`It has ${e.length} elements.`:`It is \`${e==null?e:e.constructor.name}\`.`));const s=Ke(e);return{compress(t){if(typeof t!="string")throw new TypeError(C("The `string` argument must be of type ’string’.",`Its type is \`${typeof t}\`.`));return Ze(t,s)},decompress(t){if(t==null||t.constructor.name!=="Uint8Array")throw new TypeError(C("The `buffer` argument must be an instance of ’Uint8Array’.",`It is ${t==null?`\`${t}\``:`an instance of \`${t.constructor.name}\``}.`));return xe(t,e)}}};async function wt(e,s){let t;const n=e.slice(0,4);if(n!==s.slice(0,4)?t=await(await fetch(`${z}/questions-${n}.json`)).json():t=await(await fetch(`${z}/questions.json`,{headers:{"Cache-Control":"no-cache"}})).json(),t[e]&&t[e].answers){const o=t[e].answers.split(P);return M({...t[e],answers:o})}else return null}async function gt(e,s){s||(s=await $e());const t={};for(const n in s){const a=s[n];if(a&&a.answers){for(const o of e)if(a.answers.some(r=>r.includes(o))||a.q1.toLowerCase().includes(o)||a.q2.toLowerCase().includes(o)||a.q3.toLowerCase().includes(o)||a.q4.toLowerCase().includes(o)||a.q5.toLowerCase().includes(o)||a.prompt.toLowerCase().includes(o)){t[n]=a;break}}}return Object.keys(t).length>0?(console.log(e,t),t):!1}async function $e(){let e={};const s=et().slice(0,4);let t=Be;for(;t<s;){const r=await(await fetch(`${z}/questions-${t}.json`)).json();for(const i in r){const l=r[i];l&&l.answers&&(e[i]=M({...l,answers:l.answers.split(P)}))}t=(parseInt(t)+1).toString()}const a=await(await fetch(`${z}/questions.json`,{headers:{"Cache-Control":"no-cache"}})).json();for(const o in a){const r=a[o];r&&r.answers&&(e[o]=M({...r,answers:r.answers.split(P)}))}return e}function et(){const e=new Date().getTimezoneOffset()*6e4;return new Date(Date.now()-e).toISOString().split("T")[0]}function tt(e){return e.trim().toLowerCase()}function M(e){return{q1:e.q1.trim(),q2:e.q2.trim(),q3:e.q3.trim(),q4:e.q4.trim(),q5:e.q5.trim(),answers:e.answers.map(s=>tt(s)),prompt:e.prompt.trim(),...e.message&&{message:e.message.trim()}}}function st(e){return!!(e&&e.answers&&e.answers.every(s=>s)&&e.prompt&&e.q1&&e.q2&&e.q3&&e.q4&&e.q5)}async function bt(e=!1){const t=new URL(window.location.href).searchParams.get("game");if(t)try{const[n,a]=nt(t);if(st(n))return e&&a&&(async()=>(await N(),Ue(a,{})))(),n;throw new Error("Invalid custom game.")}catch{throw new Error("Invalid custom game.")}return null}function nt(e){const s=e.replace(/-/g,"+").replace(/_/g,"/"),t=atob(s),n=Uint8Array.from(t,i=>i.codePointAt(0)??0);let a,o,r;try{a=it(n),o=M(ue(a))}catch{try{a=new TextDecoder().decode(n),o=M(ue(a)),r=ce(o)}catch{a=new TextDecoder().decode(n),o=M(JSON.parse(a)),r=ce(o)}}return[o,r]}function ce(e){return`${z}/?game=${rt(at(ot(e)))}`}function rt(e){let s;e instanceof Uint8Array?s=e:s=new TextEncoder().encode(e);const t=Array.from(s,o=>String.fromCodePoint(o)).join("");return btoa(t).replace(/\+/g,"-").replace(/\//g,"_")}function ot(e){let s=[e.q1,e.q2,e.q3,e.q4,e.q5,e.answers.join(",")];return e.prompt==="What am I?"?e.message&&s.push("",e.message):(s.push(e.prompt),e.message&&s.push(e.message)),s.join(K)}function ue(e){if(!e.includes(K))throw new Error("Invalid minified game: no | separator");const s=e.split(K);if(s.length<6)throw new Error("Invalid minified game: too few fields");const[t,n,a,o,r,i,l,g]=s;return{q1:t,q2:n,q3:a,q4:o,q5:r,answers:i.split(P),prompt:l||"What am I?",...g&&{message:g}}}function at(e){const{compress:s}=ke({dictionary:Ee});return s(e)}function it(e){const{decompress:s}=ke({dictionary:Ee});return s(e)}function _t(e){const s=e-1;return s*s*s+1}function yt(e){return-.5*(Math.cos(Math.PI*e)-1)}function lt(e){return new Worker(""+new URL("../workers/autocomplete.worker-Cn9xPUT1.js",import.meta.url).href,{type:"module",name:e==null?void 0:e.name})}function fe(e,s,t){const n=e.slice();return n[27]=s[t],n[29]=t,n}function he(e){let s,t,n,a,o;return t=new _e({props:{image:"arrow",color:"var(--color-accent-1)",alt:"guess"}}),{c(){s=I("button"),ye(t.$$.fragment),this.h()},l(r){s=T(r,"BUTTON",{id:!0,class:!0});var i=k(s);qe(t.$$.fragment,i),i.forEach(b),this.h()},h(){m(s,"id","guess-btn"),m(s,"class","icon svelte-10t2zie")},m(r,i){U(r,s,i),Ie(t,s,null),n=!0,a||(o=v(s,"click",W(e[9])),a=!0)},p:be,i(r){n||(E(t.$$.fragment,r),n=!0)},o(r){S(t.$$.fragment,r),n=!1},d(r){r&&b(s),Te(t),a=!1,o()}}}function me(e){let s,t,n,a,o;return t=new _e({props:{image:"cross",color:"var(--color-text-3)",alt:"clear"}}),{c(){s=I("button"),ye(t.$$.fragment),this.h()},l(r){s=T(r,"BUTTON",{id:!0,class:!0});var i=k(s);qe(t.$$.fragment,i),i.forEach(b),this.h()},h(){m(s,"id","clear-btn"),m(s,"class","icon svelte-10t2zie")},m(r,i){U(r,s,i),Ie(t,s,null),n=!0,a||(o=v(s,"click",W(e[12])),a=!0)},p:be,i(r){n||(E(t.$$.fragment,r),n=!0)},o(r){S(t.$$.fragment,r),n=!1},d(r){r&&b(s),Te(t),a=!1,o()}}}function de(e){let s,t,n=e[3]&&pe(e),a=ae(e[5]),o=[];for(let r=0;r<a.length;r+=1)o[r]=we(fe(e,a,r));return{c(){s=I("ul"),n&&n.c(),t=j();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){s=T(r,"UL",{id:!0,role:!0,class:!0});var i=k(s);n&&n.l(i),t=G(i);for(let l=0;l<o.length;l+=1)o[l].l(i);i.forEach(b),this.h()},h(){m(s,"id","matches"),m(s,"role","listbox"),m(s,"class","svelte-10t2zie")},m(r,i){U(r,s,i),n&&n.m(s,null),y(s,t);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(s,null)},p(r,i){if(r[3]?n?n.p(r,i):(n=pe(r),n.c(),n.m(s,t)):n&&(n.d(1),n=null),i&3108){a=ae(r[5]);let l;for(l=0;l<a.length;l+=1){const g=fe(r,a,l);o[l]?o[l].p(g,i):(o[l]=we(g),o[l].c(),o[l].m(s,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=a.length}},d(r){r&&b(s),n&&n.d(),Oe(o,r)}}}function pe(e){let s,t,n,a,o;return{c(){s=I("li"),t=V("no results for "),n=I("span"),a=V(e[1]),o=V(", try something else"),this.h()},l(r){s=T(r,"LI",{class:!0});var i=k(s);t=H(i,"no results for "),n=T(i,"SPAN",{class:!0});var l=k(n);a=H(l,e[1]),l.forEach(b),o=H(i,", try something else"),i.forEach(b),this.h()},h(){m(n,"class","no-matches-guess svelte-10t2zie"),m(s,"class","match no-matches svelte-10t2zie")},m(r,i){U(r,s,i),y(s,t),y(s,n),y(n,a),y(s,o)},p(r,i){i&2&&Ne(a,r[1])},d(r){r&&b(s)}}}function we(e){let s,t,n=e[27][1]+"",a,o,r,i,l;function g(){return e[22](e[29])}function q(...f){return e[23](e[27],...f)}return{c(){s=I("li"),t=new Re(!1),a=j(),this.h()},l(f){s=T(f,"LI",{id:!0,class:!0,role:!0,tabindex:!0,"aria-selected":!0});var u=k(s);t=Pe(u,!1),a=G(u),u.forEach(b),this.h()},h(){t.a=a,m(s,"id","match-"+e[29]),m(s,"class",o=R("match"+(e[29]===e[2]?" selected":""))+" svelte-10t2zie"),m(s,"role","option"),m(s,"tabindex",e[29]),m(s,"aria-selected",r=e[29]===e[2]?"true":"false")},m(f,u){U(f,s,u),t.m(n,s),y(s,a),i||(l=[v(s,"mouseenter",g),v(s,"mousedown",W(q))],i=!0)},p(f,u){e=f,u&32&&n!==(n=e[27][1]+"")&&t.p(n),u&4&&o!==(o=R("match"+(e[29]===e[2]?" selected":""))+" svelte-10t2zie")&&m(s,"class",o),u&4&&r!==(r=e[29]===e[2]?"true":"false")&&m(s,"aria-selected",r)},d(f){f&&b(s),i=!1,ge(l)}}}function ct(e){let s,t,n,a,o,r,i,l,g,q,f,u=e[7]&&he(e),w=e[1].length>0&&me(e),d=e[4]&&de(e);return{c(){s=I("form"),t=I("div"),n=I("input"),r=j(),u&&u.c(),i=j(),w&&w.c(),l=j(),d&&d.c(),this.h()},l(h){s=T(h,"FORM",{});var p=k(s);t=T(p,"DIV",{id:!0,class:!0});var _=k(t);n=T(_,"INPUT",{type:!0,list:!0,id:!0,class:!0,autocomplete:!0,placeholder:!0,"aria-autocomplete":!0,"aria-expanded":!0,"aria-controls":!0,"aria-label":!0}),r=G(_),u&&u.l(_),i=G(_),w&&w.l(_),_.forEach(b),l=G(p),d&&d.l(p),p.forEach(b),this.h()},h(){m(n,"type","search"),m(n,"list","guess-autocomplete"),m(n,"id","guess"),m(n,"class",a=R(e[7]?"can-submit":"")+" svelte-10t2zie"),m(n,"autocomplete","off"),n.autofocus=o=!e[0],n.required=!0,m(n,"placeholder","Type a guess"),m(n,"aria-autocomplete","list"),m(n,"aria-expanded","false"),m(n,"aria-controls","matches"),m(n,"aria-label","Type a guess"),m(t,"id","search-box"),m(t,"class","svelte-10t2zie")},m(h,p){U(h,s,p),y(s,t),y(t,n),$(n,e[1]),e[21](n),y(t,r),u&&u.m(t,null),y(t,i),w&&w.m(t,null),y(s,l),d&&d.m(s,null),g=!0,e[0]||n.focus(),q||(f=[v(n,"input",e[20]),v(n,"keydown",e[13]),v(s,"submit",W(e[9]))],q=!0)},p(h,[p]){(!g||p&128&&a!==(a=R(h[7]?"can-submit":"")+" svelte-10t2zie"))&&m(n,"class",a),(!g||p&1&&o!==(o=!h[0]))&&(n.autofocus=o),p&2&&n.value!==h[1]&&$(n,h[1]),h[7]?u?(u.p(h,p),p&128&&E(u,1)):(u=he(h),u.c(),E(u,1),u.m(t,i)):u&&(re(),S(u,1,1,()=>{u=null}),oe()),h[1].length>0?w?(w.p(h,p),p&2&&E(w,1)):(w=me(h),w.c(),E(w,1),w.m(t,null)):w&&(re(),S(w,1,1,()=>{w=null}),oe()),h[4]?d?d.p(h,p):(d=de(h),d.c(),d.m(s,null)):d&&(d.d(1),d=null)},i(h){g||(E(u),E(w),g=!0)},o(h){S(u),S(w),g=!1},d(h){h&&b(s),e[21](null),u&&u.d(),w&&w.d(),d&&d.d(),q=!1,ge(f)}}}const ut=10;function ft(e,s,t){let n,a,o,r,i,l;ee(e,te,c=>t(25,l=c));let{answers:g}=s,{disabled:q=!1}=s,f="",u=-1;const w=je([]);ee(e,w,c=>t(5,i=c));let d,h,p="",_=!1,B=se;ze(async()=>{t(18,B=Math.min(se,...g.map(c=>c.length))),t(15,d=new lt),d.postMessage({answers:g}),t(15,d.onmessage=async({data:c})=>{var x;const{pastGuess:Y,results:Q}=c;f===Y&&(w.set(Q),f!==p&&(t(16,p=""),t(17,_=!1)),Q.length>0?A(0):A(-1),await N(),o&&((x=document.querySelector(".clue-question.new"))==null||x.scrollIntoView({behavior:"smooth"})))},d)});let L;function ve(){return g.includes(f)}function Z(){if(q)return O();if(o){const c=i[u][0];if(r&&c===f.trim()&&t(1,f=c),c!==f){F(c);return}}else if(!p||p!==f)return;Fe.update(c=>[...c,f]),ve()?ne.set(!0):l<5?(te.update(c=>c+1),O()):ne.set(!1)}function A(c){t(2,u=c),c===-1?(h.setAttribute("aria-expanded","false"),h.removeAttribute("aria-activedescendant")):(h.setAttribute("aria-expanded","true"),h.setAttribute("aria-activedescendant","match-"+c))}async function F(c){t(1,f=c),t(16,p=f),t(17,_=!0),await N(),t(6,h.scrollLeft=h.scrollWidth,h)}async function O(){t(1,f=""),t(16,p=""),await N(),h.focus(),h.scrollIntoView({behavior:"smooth",block:"end"})}function Ae(c){if(c.key==="Escape"){O();return}if(a&&c.key==="Enter"){c.preventDefault();return}u>=0&&(c.key==="Enter"?(Z(),c.preventDefault()):c.key==="ArrowDown"?u<i.length-1&&(A(u+1),c.preventDefault()):c.key==="ArrowUp"&&u>0&&(A(u-1),c.preventDefault()))}Le(()=>{clearTimeout(L),d&&d.terminate()});function Se(){f=this.value,t(1,f)}function De(c){We[c?"unshift":"push"](()=>{h=c,t(6,h)})}const Ce=c=>A(c),Me=(c,Y)=>Y.button===0&&F(c[0]);return e.$$set=c=>{"answers"in c&&t(14,g=c.answers),"disabled"in c&&t(0,q=c.disabled)},e.$$.update=()=>{if(e.$$.dirty&2&&t(1,f=f.toLowerCase()),e.$$.dirty&458754&&t(4,n=f!==p&&!_&&f.length>=B),e.$$.dirty&48&&t(3,a=n&&i.length===0),e.$$.dirty&24&&(o=n&&!a),e.$$.dirty&65575&&t(7,r=f&&!q&&(f===p||u===0&&f.trim()===i[0][0])),e.$$.dirty&557058)e:{if(!d)break e;clearTimeout(L),t(19,L=setTimeout(()=>{d.postMessage({guess:f})},ut))}},[q,f,u,a,n,i,h,r,w,Z,A,F,O,Ae,g,d,p,_,B,L,Se,De,Ce,Me]}class qt extends Ye{constructor(s){super(),Ve(this,s,ft,ct,Ge,{answers:14,disabled:0})}}export{qt as G,wt as a,M as b,_t as c,ce as d,ae as e,$e as f,bt as g,gt as h,st as i,yt as s};
