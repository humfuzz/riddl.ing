import{b as ie,r as Te,w as Ee}from"./entry.9goLaDZG.js";import{v as G,s as ke,e as I,a as W,c as v,b as M,g as B,f as _,p as h,D as j,i as S,h as k,U as X,z as T,V as N,G as ue,k as Y,o as Ae,W as Ue,n as ce,B as De,X as Me,Y as Se,r as Ce}from"./scheduler.I2lLq2bV.js";import{A as fe,q as J,I as he,g as Ge,w as K}from"./consts.n1laLpjI.js";import{S as We,i as Be,a as q,g as Q,t as A,c as Z,b as me,d as de,m as pe,e as we}from"./index.C3uW-dve.js";function x(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const ge=[" ","the","e","t","a","of","o","and","i","n","s","e ","r"," th"," t","in","he","th","h","he ","to","l","s ","d"," a","an","er","c"," o","d ","on"," of","re","of ","t ",", ","is","u","at","   ","n ","or","which","f","m","as","it","that","was","en","  "," w","es"," an"," i","f ","g","p","nd"," s","nd ","ed ","w","ed","for","te","ing","y ","The"," c","ti","r ","his","st"," in","ar","nt",","," to","y","ng"," h","with","le","al","to ","b","ou","be","were"," b","se","o ","ent","ha","ng ","their","hi","from"," f","in ","de","ion","me","v",".","ve","all","re ","ri","ro","is ","co","f t","are","ea",". ","her"," m","er "," p","es ","by","they","di","ra","ic","not","s, ","d t","at ","ce","la","h ","ne","as ","tio","on ","n t","io","we"," a ","om",", a","s o","ur","li","ll","ch","had","this","e t","g "," wh","ere"," co","e o","a ","us"," d","ss"," be"," e","s a","ma","one","t t","or ","but","el","so","l ","e s","s,","no","ter"," wa","iv","ho","e a"," r","hat","s t","ns","ch ","wh","tr","ut","have","ly ","ta"," ha"," on","tha","-"," l","ati","en ","pe"," re","there","ass","si"," fo","wa","ec","our","who","its","z","fo","rs","ot","un","im","th ","nc","ate","ver","ad"," we","ly","ee"," n","id"," cl","ac","il","rt"," wi","div","e, "," it","whi"," ma","ge","x","e c","men","I","’","“","”","|","I’m ","You ","ou ",".|"," me.","’m a","how"," am I?"," and ","here"],{push:U}=Array.prototype,{min:Oe}=Math,je=new TextEncoder,$=new TextDecoder;class L extends Error{constructor(s){super(s),this.name="DecompressError"}}const D=(...e)=>e.join(" "),Ne=e=>{const s=new Map;for(const[t,n]of e.entries()){let o=s;const a=n[Symbol.iterator]();for(const r of a){let l=o.get(r);if(!l){const p=new Map;o.set(r,p),l=p}o=l}o.value=t}return s},Re=(e,s,t)=>{let n=e,o=t;const a=[];do n=n.get(s[o]),n&&(a.push({character:s[o],value:n.value,index:o}),o+=1);while(n&&s[o]);let r=a.length-1;for(;r>0&&a[r].value===void 0;)r-=1;return[a[r]&&a[r].value,(a[r]&&a[r].index||t)+1]},V=(e,s)=>{const t=[];return s>1?t.push(255,s-1):t.push(254),U.apply(t,e.splice(0,s)),t},Pe=(e,s)=>{const t=[...e],n=t.length,o=[];let a=0;const r=[];for(;a<n;){const[l,p]=Re(s,t,a);if(l!==void 0){for(;o.length>0;)U.apply(r,V(o,Oe(256,o.length)));r.push(l)}else for(U.apply(o,je.encode(t[a]));o.length>=256;)U.apply(r,V(o,256));a=p}o.length>0&&U.apply(r,V(o,o.length));try{return Uint8Array.of(...r)}catch{return new Uint8Array(r)}},ee=(e,s,t)=>{const n=s+1;if(n>=t)throw new L(D(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read at index ${n}.`));return[e.slice(n,n+1),n+1]},Ve=(e,s,t)=>{const n=s+1;if(n>=t)throw new L(D(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read at index ${n}.`));const o=n+1,a=n+e[n]+2;if(a>t)throw new L(D(`The \`bytes\` argument is malformed because it has ${t} elements.`,`It wants to read from index ${o} to ${a}.`));return[e.slice(o,a),a]},Le=(e,s)=>{const t=e.length;let n=0,o="";for(;n<t;){const a=e[n];if(a===254){const[r,l]=ee(e,n,t);o+=$.decode(r),n=l;continue}if(a===255){const r=[];do{const[l,p]=Ve(e,n,t);U.apply(r,l),n=p}while(e[n]===255);if(e[n]===254){const[l,p]=ee(e,n,t);r.push(l),n=p}o+=$.decode(Uint8Array.of(...r));continue}o+=s[a],n+=1}return o},be=({dictionary:e}={})=>{if(!Array.isArray(e)||e.length>254)throw new TypeError(D("The `dictionary` option must be an array with at most 254 elements.",Array.isArray(e)?`It has ${e.length} elements.`:`It is \`${e==null?e:e.constructor.name}\`.`));const s=Ne(e);return{compress(t){if(typeof t!="string")throw new TypeError(D("The `string` argument must be of type ’string’.",`Its type is \`${typeof t}\`.`));return Pe(t,s)},decompress(t){if(t==null||t.constructor.name!=="Uint8Array")throw new TypeError(D("The `buffer` argument must be an instance of ’Uint8Array’.",`It is ${t==null?`\`${t}\``:`an instance of \`${t.constructor.name}\``}.`));return Le(t,e)}}};async function rt(e){const t=await(await fetch(`${ie}/questions.json`,{headers:{"Cache-Control":"no-cache"}})).json();if(t[e]&&t[e].answers){const n=t[e].answers.split(fe);return O({...t[e],answers:n})}else return null}function Fe(e){return e.trim().toLowerCase()}function O(e){return{q1:e.q1.trim(),q2:e.q2.trim(),q3:e.q3.trim(),q4:e.q4.trim(),q5:e.q5.trim(),answers:e.answers.map(s=>Fe(s)),prompt:e.prompt.trim(),...e.message&&{message:e.message.trim()}}}function ze(e){return!!(e&&e.answers&&e.answers.every(s=>s)&&e.prompt&&e.q1&&e.q2&&e.q3&&e.q4&&e.q5)}async function ot(e=!1){const t=new URL(window.location.href).searchParams.get("game");if(t)try{const[n,o]=He(t);if(ze(n))return e&&o&&(async()=>(await G(),Te(o,{})))(),n;throw new Error("Invalid custom game.")}catch{throw new Error("Invalid custom game.")}return null}function He(e){const s=e.replace(/-/g,"+").replace(/_/g,"/"),t=atob(s),n=Uint8Array.from(t,l=>l.codePointAt(0)??0);let o,a,r;try{o=Ke(n),a=O(se(o))}catch{try{o=new TextDecoder().decode(n),a=O(se(o)),r=te(a)}catch{o=new TextDecoder().decode(n),a=O(JSON.parse(o)),r=te(a)}}return[a,r]}function te(e){return`${ie}/?game=${Xe(Je(Ye(e)))}`}function Xe(e){let s;e instanceof Uint8Array?s=e:s=new TextEncoder().encode(e);const t=Array.from(s,a=>String.fromCodePoint(a)).join("");return btoa(t).replace(/\+/g,"-").replace(/\//g,"_")}function Ye(e){let s=[e.q1,e.q2,e.q3,e.q4,e.q5,e.answers.join(",")];return e.prompt==="What am I?"?e.message&&s.push("",e.message):(s.push(e.prompt),e.message&&s.push(e.message)),s.join("|")}function se(e){if(!e.includes("|"))throw new Error("Invalid minified game: no | separator");const s=e.split("|");if(s.length<6)throw new Error("Invalid minified game: too few fields");const[t,n,o,a,r,l,p,c]=s;return{q1:t,q2:n,q3:o,q4:a,q5:r,answers:l.split(fe),prompt:p||"What am I?",...c&&{message:c}}}function Je(e){const{compress:s}=be({dictionary:ge});return s(e)}function Ke(e){const{decompress:s}=be({dictionary:ge});return s(e)}function at(e){const s=e-1;return s*s*s+1}function lt(e){return-.5*(Math.cos(Math.PI*e)-1)}function Qe(e){return new Worker(""+new URL("../workers/autocomplete.worker-OhWvXj5F.js",import.meta.url).href,{type:"module",name:e==null?void 0:e.name})}function ne(e,s,t){const n=e.slice();return n[24]=s[t],n[26]=t,n}function re(e){let s,t,n,o,a;return t=new he({props:{image:"arrow",color:"var(--color-accent-1)",alt:"guess"}}),{c(){s=I("button"),me(t.$$.fragment),this.h()},l(r){s=v(r,"BUTTON",{id:!0,class:!0});var l=M(s);de(t.$$.fragment,l),l.forEach(_),this.h()},h(){h(s,"id","guess-btn"),h(s,"class","icon svelte-17htsum")},m(r,l){S(r,s,l),pe(t,s,null),n=!0,o||(a=T(s,"click",N(e[8])),o=!0)},p:ce,i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){A(t.$$.fragment,r),n=!1},d(r){r&&_(s),we(t),o=!1,a()}}}function oe(e){let s,t,n,o,a;return t=new he({props:{image:"cross",color:"var(--color-text-3)",alt:"clear"}}),{c(){s=I("button"),me(t.$$.fragment),this.h()},l(r){s=v(r,"BUTTON",{id:!0,class:!0});var l=M(s);de(t.$$.fragment,l),l.forEach(_),this.h()},h(){h(s,"id","clear-btn"),h(s,"class","icon svelte-17htsum")},m(r,l){S(r,s,l),pe(t,s,null),n=!0,o||(a=T(s,"click",N(e[11])),o=!0)},p:ce,i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){A(t.$$.fragment,r),n=!1},d(r){r&&_(s),we(t),o=!1,a()}}}function ae(e){let s,t=x(e[3]),n=[];for(let o=0;o<t.length;o+=1)n[o]=le(ne(e,t,o));return{c(){s=I("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){s=v(o,"UL",{id:!0,role:!0,class:!0});var a=M(s);for(let r=0;r<n.length;r+=1)n[r].l(a);a.forEach(_),this.h()},h(){h(s,"id","matches"),h(s,"role","listbox"),h(s,"class","svelte-17htsum")},m(o,a){S(o,s,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,null)},p(o,a){if(a&1548){t=x(o[3]);let r;for(r=0;r<t.length;r+=1){const l=ne(o,t,r);n[r]?n[r].p(l,a):(n[r]=le(l),n[r].c(),n[r].m(s,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(o){o&&_(s),De(n,o)}}}function le(e){let s,t,n=e[24][1]+"",o,a,r,l,p;function c(){return e[20](e[26])}function b(...g){return e[21](e[24],...g)}return{c(){s=I("li"),t=new Me(!1),o=W(),this.h()},l(g){s=v(g,"LI",{id:!0,class:!0,role:!0,tabindex:!0,"aria-selected":!0});var i=M(s);t=Se(i,!1),o=B(i),i.forEach(_),this.h()},h(){t.a=o,h(s,"id","match-"+e[26]),h(s,"class",a=j("match"+(e[26]===e[2]?" selected":""))+" svelte-17htsum"),h(s,"role","option"),h(s,"tabindex",e[26]),h(s,"aria-selected",r=e[26]===e[2]?"true":"false")},m(g,i){S(g,s,i),t.m(n,s),k(s,o),l||(p=[T(s,"mouseenter",c),T(s,"mousedown",N(b))],l=!0)},p(g,i){e=g,i&8&&n!==(n=e[24][1]+"")&&t.p(n),i&4&&a!==(a=j("match"+(e[26]===e[2]?" selected":""))+" svelte-17htsum")&&h(s,"class",a),i&4&&r!==(r=e[26]===e[2]?"true":"false")&&h(s,"aria-selected",r)},d(g){g&&_(s),l=!1,ue(p)}}}function Ze(e){let s,t,n,o,a,r,l,p,c,b,g,i=e[5]&&re(e),f=e[1].length>0&&oe(e),m=e[6]&&ae(e);return{c(){s=I("form"),t=I("div"),n=I("input"),r=W(),i&&i.c(),l=W(),f&&f.c(),p=W(),m&&m.c(),this.h()},l(d){s=v(d,"FORM",{});var w=M(s);t=v(w,"DIV",{id:!0,class:!0});var y=M(t);n=v(y,"INPUT",{type:!0,list:!0,id:!0,class:!0,autocomplete:!0,placeholder:!0,"aria-autocomplete":!0,"aria-expanded":!0,"aria-controls":!0,"aria-label":!0}),r=B(y),i&&i.l(y),l=B(y),f&&f.l(y),y.forEach(_),p=B(w),m&&m.l(w),w.forEach(_),this.h()},h(){h(n,"type","search"),h(n,"list","guess-autocomplete"),h(n,"id","guess"),h(n,"class",o=j(e[5]?"can-submit":"")+" svelte-17htsum"),h(n,"autocomplete","off"),n.autofocus=a=!e[0],n.required=!0,h(n,"placeholder","Type a guess"),h(n,"aria-autocomplete","list"),h(n,"aria-expanded","false"),h(n,"aria-controls","matches"),h(n,"aria-label","Type a guess"),h(t,"id","search-box"),h(t,"class","svelte-17htsum")},m(d,w){S(d,s,w),k(s,t),k(t,n),X(n,e[1]),e[19](n),k(t,r),i&&i.m(t,null),k(t,l),f&&f.m(t,null),k(s,p),m&&m.m(s,null),c=!0,e[0]||n.focus(),b||(g=[T(n,"input",e[18]),T(n,"keydown",e[12]),T(s,"submit",N(e[8]))],b=!0)},p(d,[w]){(!c||w&32&&o!==(o=j(d[5]?"can-submit":"")+" svelte-17htsum"))&&h(n,"class",o),(!c||w&1&&a!==(a=!d[0]))&&(n.autofocus=a),w&2&&n.value!==d[1]&&X(n,d[1]),d[5]?i?(i.p(d,w),w&32&&q(i,1)):(i=re(d),i.c(),q(i,1),i.m(t,l)):i&&(Q(),A(i,1,1,()=>{i=null}),Z()),d[1].length>0?f?(f.p(d,w),w&2&&q(f,1)):(f=oe(d),f.c(),q(f,1),f.m(t,null)):f&&(Q(),A(f,1,1,()=>{f=null}),Z()),d[6]?m?m.p(d,w):(m=ae(d),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i(d){c||(q(i),q(f),c=!0)},o(d){A(i),A(f),c=!1},d(d){d&&_(s),e[19](null),i&&i.d(),f&&f.d(),m&&m.d(),b=!1,ue(g)}}}const xe=10;function $e(e,s,t){let n,o,a,r;Y(e,J,u=>t(22,r=u));let{answers:l}=s,{disabled:p=!1}=s,c="",b=-1;const g=Ee([]);Y(e,g,u=>t(3,a=u));let i,f,m="",d=!1;Ae(async()=>{t(14,i=new Qe),i.postMessage({answers:l}),t(14,i.onmessage=async({data:u})=>{var H;const{pastGuess:P,results:z}=u;c===P&&(g.set(z),c!==m&&(t(15,m=""),t(16,d=!1)),z.length>0?E(0):E(-1),await G(),n&&((H=document.querySelector(".clue-question.new"))==null||H.scrollIntoView({behavior:"smooth"})))},i)});let w;function y(){return l.includes(c)}function F(){if(p)return C();if(n){const u=a[b][0];if(o&&u===c.trim()&&t(1,c=u),u!==c){R(u);return}}else if(!m||m!==c)return;Ge.update(u=>[...u,c]),y()?K.set(!0):r<5?(J.update(u=>u+1),C()):K.set(!1)}function E(u){t(2,b=u),u===-1?(f.setAttribute("aria-expanded","false"),f.removeAttribute("aria-activedescendant")):(f.setAttribute("aria-expanded","true"),f.setAttribute("aria-activedescendant","match-"+u))}async function R(u){t(1,c=u),t(15,m=c),t(16,d=!0),await G(),t(4,f.scrollLeft=f.scrollWidth,f)}async function C(){t(1,c=""),t(15,m=""),await G(),f.focus(),f.scrollIntoView({behavior:"smooth",block:"end"})}function _e(u){b>=0&&(u.key==="Enter"?(F(),u.preventDefault()):u.key==="ArrowDown"?b<a.length-1&&(E(b+1),u.preventDefault()):u.key==="ArrowUp"?b>0&&(E(b-1),u.preventDefault()):u.key==="Escape"&&C())}Ue(()=>{clearTimeout(w),i&&i.terminate()});function ye(){c=this.value,t(1,c)}function qe(u){Ce[u?"unshift":"push"](()=>{f=u,t(4,f)})}const Ie=u=>E(u),ve=(u,P)=>P.button===0&&R(u[0]);return e.$$set=u=>{"answers"in u&&t(13,l=u.answers),"disabled"in u&&t(0,p=u.disabled)},e.$$.update=()=>{if(e.$$.dirty&2&&t(1,c=c.toLowerCase()),e.$$.dirty&98314&&t(6,n=c!==m&&!d&&a.length>0),e.$$.dirty&32783&&t(5,o=c&&!p&&(c===m||b===0&&c.trim()===a[0][0])),e.$$.dirty&147458)e:{if(!i)break e;clearTimeout(w),t(17,w=setTimeout(()=>{i.postMessage({guess:c})},xe))}},[p,c,b,a,f,o,n,g,F,E,R,C,_e,l,i,m,d,w,ye,qe,Ie,ve]}class it extends We{constructor(s){super(),Be(this,s,$e,Ze,ke,{answers:13,disabled:0})}}export{it as G,rt as a,O as b,at as c,te as d,x as e,ot as g,ze as i,lt as s};
