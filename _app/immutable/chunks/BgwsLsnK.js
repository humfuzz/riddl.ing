import{r as Ue,b as L,w as je}from"./BJ4glpKy.js";import{p as N,s as Ge,d as b,I as ge,E as R,r as m,W as $,i as U,b as y,y as v,X as P,c as I,e as k,g as j,h as E,j as G,k as ee,o as Le,B as Oe,n as be,C as ze,v as Ne,a as Re,f as V,t as H,Y as We,Z as Pe}from"./BHOpnvnq.js";import{F as Be,a as W,b as K,M as te,I as _e,g as Ye,w as se,q as ne}from"./9I6RqOGr.js";import{S as Fe,i as Ve,t as S,a as T,g as re,c as oe,d as ye,m as qe,e as Ie,b as Ee}from"./DR59HkzT.js";function ae(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}const Te=[" ","the","e","t","a","of","o","and","i","n","s","e ","r"," th"," t","in","he","th","h","he ","to","l","s ","d"," a","an","er","c"," o","d ","on"," of","re","of ","t ",", ","is","u","at","   ","n ","or","which","f","m","as","it","that","was","en","  "," w","es"," an"," i","f ","g","p","nd"," s","nd ","ed ","w","ed","for","te","ing","y ","The"," c","ti","r ","his","st"," in","ar","nt",","," to","y","ng"," h","with","le","al","to ","b","ou","be","were"," b","se","o ","ent","ha","ng ","their","hi","from"," f","in ","de","ion","me","v",".","ve","all","re ","ri","ro","is ","co","f t","are","ea",". ","her"," m","er "," p","es ","by","they","di","ra","ic","not","s, ","d t","at ","ce","la","h ","ne","as ","tio","on ","n t","io","we"," a ","om",", a","s o","ur","li","ll","ch","had","this","e t","g "," wh","ere"," co","e o","a ","us"," d","ss"," be"," e","s a","ma","one","t t","or ","but","el","so","l ","e s","s,","no","ter"," wa","iv","ho","e a"," r","hat","s t","ns","ch ","wh","tr","ut","have","ly ","ta"," ha"," on","tha","-"," l","ati","en ","pe"," re","there","ass","si"," fo","wa","ec","our","who","its","z","fo","rs","ot","un","im","th ","nc","ate","ver","ad"," we","ly","ee"," n","id"," cl","ac","il","rt"," wi","div","e, "," it","whi"," ma","ge","x","e c","men","I","’","“","”","|","I’m ","You ","ou ",".|"," me.","’m a","how"," am I?"," and ","here"],{push:D}=Array.prototype,{min:He}=Math,Je=new TextEncoder,ie=new TextDecoder;class X extends Error{constructor(t){super(t),this.name="DecompressError"}}const C=(...e)=>e.join(" "),Ke=e=>{const t=new Map;for(const[s,n]of e.entries()){let a=t;const o=n[Symbol.iterator]();for(const r of o){let i=a.get(r);if(!i){const l=new Map;a.set(r,l),i=l}a=i}a.value=s}return t},Xe=(e,t,s)=>{let n=e,a=s;const o=[];do n=n.get(t[a]),n&&(o.push({character:t[a],value:n.value,index:a}),a+=1);while(n&&t[a]);let r=o.length-1;for(;r>0&&o[r].value===void 0;)r-=1;return[o[r]&&o[r].value,(o[r]&&o[r].index||s)+1]},J=(e,t)=>{const s=[];return t>1?s.push(255,t-1):s.push(254),D.apply(s,e.splice(0,t)),s},Ze=(e,t)=>{const s=[...e],n=s.length,a=[];let o=0;const r=[];for(;o<n;){const[i,l]=Xe(t,s,o);if(i!==void 0){for(;a.length>0;)D.apply(r,J(a,He(256,a.length)));r.push(i)}else for(D.apply(a,Je.encode(s[o]));a.length>=256;)D.apply(r,J(a,256));o=l}a.length>0&&D.apply(r,J(a,a.length));try{return Uint8Array.of(...r)}catch{return new Uint8Array(r)}},le=(e,t,s)=>{const n=t+1;if(n>=s)throw new X(C(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read at index ${n}.`));return[e.slice(n,n+1),n+1]},Qe=(e,t,s)=>{const n=t+1;if(n>=s)throw new X(C(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read at index ${n}.`));const a=n+1,o=n+e[n]+2;if(o>s)throw new X(C(`The \`bytes\` argument is malformed because it has ${s} elements.`,`It wants to read from index ${a} to ${o}.`));return[e.slice(a,o),o]},xe=(e,t)=>{const s=e.length;let n=0,a="";for(;n<s;){const o=e[n];if(o===254){const[r,i]=le(e,n,s);a+=ie.decode(r),n=i;continue}if(o===255){const r=[];do{const[i,l]=Qe(e,n,s);D.apply(r,i),n=l}while(e[n]===255);if(e[n]===254){const[i,l]=le(e,n,s);r.push(i),n=l}a+=ie.decode(Uint8Array.of(...r));continue}a+=t[o],n+=1}return a},ke=({dictionary:e}={})=>{if(!Array.isArray(e)||e.length>254)throw new TypeError(C("The `dictionary` option must be an array with at most 254 elements.",Array.isArray(e)?`It has ${e.length} elements.`:`It is \`${e==null?e:e.constructor.name}\`.`));const t=Ke(e);return{compress(s){if(typeof s!="string")throw new TypeError(C("The `string` argument must be of type ’string’.",`Its type is \`${typeof s}\`.`));return Ze(s,t)},decompress(s){if(s==null||s.constructor.name!=="Uint8Array")throw new TypeError(C("The `buffer` argument must be an instance of ’Uint8Array’.",`It is ${s==null?`\`${s}\``:`an instance of \`${s.constructor.name}\``}.`));return xe(s,e)}}};async function wt(e,t){let s;const n=e.slice(0,4);if(n!==t.slice(0,4)?s=await(await fetch(`${L}/questions-${n}.json`)).json():s=await(await fetch(`${L}/questions.json`,{headers:{"Cache-Control":"no-cache"}})).json(),s[e]&&s[e].answers){const o=s[e].answers.split(W);return M({...s[e],answers:o})}else return null}async function gt(e,t){t||(t=await $e());const s={};for(const n in t){const a=t[n];if(a&&a.answers){for(const o of e)if(a.answers.some(r=>r.includes(o))||a.q1.toLowerCase().includes(o)||a.q2.toLowerCase().includes(o)||a.q3.toLowerCase().includes(o)||a.q4.toLowerCase().includes(o)||a.q5.toLowerCase().includes(o)||a.prompt.toLowerCase().includes(o)){s[n]=a;break}}}return Object.keys(s).length>0?s:!1}async function $e(){let e={};const t=et().slice(0,4);let s=Be;for(;s<t;){const r=await(await fetch(`${L}/questions-${s}.json`)).json();for(const i in r){const l=r[i];l&&l.answers&&(e[i]=M({...l,answers:l.answers.split(W)}))}s=(parseInt(s)+1).toString()}const a=await(await fetch(`${L}/questions.json`,{headers:{"Cache-Control":"no-cache"}})).json();for(const o in a){const r=a[o];r&&r.answers&&(e[o]=M({...r,answers:r.answers.split(W)}))}return e}function et(){const e=new Date().getTimezoneOffset()*6e4;return new Date(Date.now()-e).toISOString().split("T")[0]}function tt(e){return e.trim().toLowerCase()}function M(e){return{q1:e.q1.trim(),q2:e.q2.trim(),q3:e.q3.trim(),q4:e.q4.trim(),q5:e.q5.trim(),answers:e.answers.map(t=>tt(t)),prompt:e.prompt.trim(),...e.message&&{message:e.message.trim()}}}function st(e){return!!(e&&e.answers&&e.answers.every(t=>t)&&e.prompt&&e.q1&&e.q2&&e.q3&&e.q4&&e.q5)}async function bt(e=!1){const s=new URL(window.location.href).searchParams.get("game");if(s)try{const[n,a]=nt(s);if(st(n))return e&&a&&(async()=>(await N(),Ue(a,{})))(),n;throw new Error("Invalid custom game.")}catch{throw new Error("Invalid custom game.")}return null}function nt(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),s=atob(t),n=Uint8Array.from(s,i=>i.codePointAt(0)??0);let a,o,r;try{a=it(n),o=M(ue(a))}catch{try{a=new TextDecoder().decode(n),o=M(ue(a)),r=ce(o)}catch{a=new TextDecoder().decode(n),o=M(JSON.parse(a)),r=ce(o)}}return[o,r]}function ce(e){return`${L}/?game=${rt(at(ot(e)))}`}function rt(e){let t;e instanceof Uint8Array?t=e:t=new TextEncoder().encode(e);const s=Array.from(t,o=>String.fromCodePoint(o)).join("");return btoa(s).replace(/\+/g,"-").replace(/\//g,"_")}function ot(e){let t=[e.q1,e.q2,e.q3,e.q4,e.q5,e.answers.join(",")];return e.prompt==="What am I?"?e.message&&t.push("",e.message):(t.push(e.prompt),e.message&&t.push(e.message)),t.join(K)}function ue(e){if(!e.includes(K))throw new Error("Invalid minified game: no | separator");const t=e.split(K);if(t.length<6)throw new Error("Invalid minified game: too few fields");const[s,n,a,o,r,i,l,g]=t;return{q1:s,q2:n,q3:a,q4:o,q5:r,answers:i.split(W),prompt:l||"What am I?",...g&&{message:g}}}function at(e){const{compress:t}=ke({dictionary:Te});return t(e)}function it(e){const{decompress:t}=ke({dictionary:Te});return t(e)}function _t(e){const t=e-1;return t*t*t+1}function yt(e){return-.5*(Math.cos(Math.PI*e)-1)}function lt(e){return new Worker(""+new URL("../workers/autocomplete.worker-Dn_pUncq.js",import.meta.url).href,{type:"module",name:e==null?void 0:e.name})}function fe(e,t,s){const n=e.slice();return n[27]=t[s],n[29]=s,n}function he(e){let t,s,n,a,o;return s=new _e({props:{image:"arrow",color:"var(--color-accent-1)",alt:"guess"}}),{c(){t=E("button"),Ee(s.$$.fragment),this.h()},l(r){t=I(r,"BUTTON",{id:!0,class:!0});var i=k(t);Ie(s.$$.fragment,i),i.forEach(b),this.h()},h(){m(t,"id","guess-btn"),m(t,"class","icon svelte-10t2zie")},m(r,i){U(r,t,i),qe(s,t,null),n=!0,a||(o=v(t,"click",P(e[9])),a=!0)},p:be,i(r){n||(T(s.$$.fragment,r),n=!0)},o(r){S(s.$$.fragment,r),n=!1},d(r){r&&b(t),ye(s),a=!1,o()}}}function me(e){let t,s,n,a,o;return s=new _e({props:{image:"cross",color:"var(--color-text-3)",alt:"clear"}}),{c(){t=E("button"),Ee(s.$$.fragment),this.h()},l(r){t=I(r,"BUTTON",{id:!0,class:!0});var i=k(t);Ie(s.$$.fragment,i),i.forEach(b),this.h()},h(){m(t,"id","clear-btn"),m(t,"class","icon svelte-10t2zie")},m(r,i){U(r,t,i),qe(s,t,null),n=!0,a||(o=v(t,"click",P(e[12])),a=!0)},p:be,i(r){n||(T(s.$$.fragment,r),n=!0)},o(r){S(s.$$.fragment,r),n=!1},d(r){r&&b(t),ye(s),a=!1,o()}}}function de(e){let t,s,n=e[3]&&pe(e),a=ae(e[5]),o=[];for(let r=0;r<a.length;r+=1)o[r]=we(fe(e,a,r));return{c(){t=E("ul"),n&&n.c(),s=G();for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){t=I(r,"UL",{id:!0,role:!0,class:!0});var i=k(t);n&&n.l(i),s=j(i);for(let l=0;l<o.length;l+=1)o[l].l(i);i.forEach(b),this.h()},h(){m(t,"id","matches"),m(t,"role","listbox"),m(t,"class","svelte-10t2zie")},m(r,i){U(r,t,i),n&&n.m(t,null),y(t,s);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null)},p(r,i){if(r[3]?n?n.p(r,i):(n=pe(r),n.c(),n.m(t,s)):n&&(n.d(1),n=null),i&3108){a=ae(r[5]);let l;for(l=0;l<a.length;l+=1){const g=fe(r,a,l);o[l]?o[l].p(g,i):(o[l]=we(g),o[l].c(),o[l].m(t,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=a.length}},d(r){r&&b(t),n&&n.d(),ze(o,r)}}}function pe(e){let t,s,n,a,o;return{c(){t=E("li"),s=H("no results for "),n=E("span"),a=H(e[1]),o=H(", try something else"),this.h()},l(r){t=I(r,"LI",{class:!0});var i=k(t);s=V(i,"no results for "),n=I(i,"SPAN",{class:!0});var l=k(n);a=V(l,e[1]),l.forEach(b),o=V(i,", try something else"),i.forEach(b),this.h()},h(){m(n,"class","no-matches-guess svelte-10t2zie"),m(t,"class","match no-matches svelte-10t2zie")},m(r,i){U(r,t,i),y(t,s),y(t,n),y(n,a),y(t,o)},p(r,i){i&2&&Re(a,r[1])},d(r){r&&b(t)}}}function we(e){let t,s,n=e[27][1]+"",a,o,r,i,l;function g(){return e[22](e[29])}function q(...f){return e[23](e[27],...f)}return{c(){t=E("li"),s=new Pe(!1),a=G(),this.h()},l(f){t=I(f,"LI",{id:!0,class:!0,role:!0,tabindex:!0,"aria-selected":!0});var u=k(t);s=We(u,!1),a=j(u),u.forEach(b),this.h()},h(){s.a=a,m(t,"id","match-"+e[29]),m(t,"class",o=R("match"+(e[29]===e[2]?" selected":""))+" svelte-10t2zie"),m(t,"role","option"),m(t,"tabindex",e[29]),m(t,"aria-selected",r=e[29]===e[2]?"true":"false")},m(f,u){U(f,t,u),s.m(n,t),y(t,a),i||(l=[v(t,"mouseenter",g),v(t,"mousedown",P(q))],i=!0)},p(f,u){e=f,u&32&&n!==(n=e[27][1]+"")&&s.p(n),u&4&&o!==(o=R("match"+(e[29]===e[2]?" selected":""))+" svelte-10t2zie")&&m(t,"class",o),u&4&&r!==(r=e[29]===e[2]?"true":"false")&&m(t,"aria-selected",r)},d(f){f&&b(t),i=!1,ge(l)}}}function ct(e){let t,s,n,a,o,r,i,l,g,q,f,u=e[7]&&he(e),w=e[1].length>0&&me(e),d=e[4]&&de(e);return{c(){t=E("form"),s=E("div"),n=E("input"),r=G(),u&&u.c(),i=G(),w&&w.c(),l=G(),d&&d.c(),this.h()},l(h){t=I(h,"FORM",{});var p=k(t);s=I(p,"DIV",{id:!0,class:!0});var _=k(s);n=I(_,"INPUT",{type:!0,list:!0,id:!0,class:!0,autocomplete:!0,placeholder:!0,"aria-autocomplete":!0,"aria-expanded":!0,"aria-controls":!0,"aria-label":!0}),r=j(_),u&&u.l(_),i=j(_),w&&w.l(_),_.forEach(b),l=j(p),d&&d.l(p),p.forEach(b),this.h()},h(){m(n,"type","search"),m(n,"list","guess-autocomplete"),m(n,"id","guess"),m(n,"class",a=R(e[7]?"can-submit":"")+" svelte-10t2zie"),m(n,"autocomplete","off"),n.autofocus=o=!e[0],n.required=!0,m(n,"placeholder","Type a guess"),m(n,"aria-autocomplete","list"),m(n,"aria-expanded","false"),m(n,"aria-controls","matches"),m(n,"aria-label","Type a guess"),m(s,"id","search-box"),m(s,"class","svelte-10t2zie")},m(h,p){U(h,t,p),y(t,s),y(s,n),$(n,e[1]),e[21](n),y(s,r),u&&u.m(s,null),y(s,i),w&&w.m(s,null),y(t,l),d&&d.m(t,null),g=!0,e[0]||n.focus(),q||(f=[v(n,"input",e[20]),v(n,"keydown",e[13]),v(t,"submit",P(e[9]))],q=!0)},p(h,[p]){(!g||p&128&&a!==(a=R(h[7]?"can-submit":"")+" svelte-10t2zie"))&&m(n,"class",a),(!g||p&1&&o!==(o=!h[0]))&&(n.autofocus=o),p&2&&n.value!==h[1]&&$(n,h[1]),h[7]?u?(u.p(h,p),p&128&&T(u,1)):(u=he(h),u.c(),T(u,1),u.m(s,i)):u&&(re(),S(u,1,1,()=>{u=null}),oe()),h[1].length>0?w?(w.p(h,p),p&2&&T(w,1)):(w=me(h),w.c(),T(w,1),w.m(s,null)):w&&(re(),S(w,1,1,()=>{w=null}),oe()),h[4]?d?d.p(h,p):(d=de(h),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(h){g||(T(u),T(w),g=!0)},o(h){S(u),S(w),g=!1},d(h){h&&b(t),e[21](null),u&&u.d(),w&&w.d(),d&&d.d(),q=!1,ge(f)}}}const ut=10;function ft(e,t,s){let n,a,o,r,i,l;ee(e,ne,c=>s(25,l=c));let{answers:g}=t,{disabled:q=!1}=t,f="",u=-1;const w=je([]);ee(e,w,c=>s(5,i=c));let d,h,p="",_=!1,B=te;Le(async()=>{s(18,B=Math.min(te,...g.map(c=>c.length))),s(15,d=new lt),d.postMessage({answers:g}),s(15,d.onmessage=async({data:c})=>{var x;const{pastGuess:F,results:Q}=c;f===F&&(w.set(Q),f!==p&&(s(16,p=""),s(17,_=!1)),Q.length>0?A(0):A(-1),await N(),o&&((x=document.querySelector(".clue-question.new"))==null||x.scrollIntoView({behavior:"smooth"})))},d)});let O;function ve(){return g.includes(f)}function Z(){if(q)return z();if(o){const c=i[u][0];if(r&&c===f.trim()&&s(1,f=c),c!==f){Y(c);return}}else if(!p||p!==f)return;Ye.update(c=>[...c,f]),ve()?se.set(!0):l<5?(ne.update(c=>c+1),z()):se.set(!1)}function A(c){s(2,u=c),c===-1?(h.setAttribute("aria-expanded","false"),h.removeAttribute("aria-activedescendant")):(h.setAttribute("aria-expanded","true"),h.setAttribute("aria-activedescendant","match-"+c))}async function Y(c){s(1,f=c),s(16,p=f),s(17,_=!0),await N(),s(6,h.scrollLeft=h.scrollWidth,h)}async function z(){s(1,f=""),s(16,p=""),await N(),h.focus(),h.scrollIntoView({behavior:"smooth",block:"end"})}function Ae(c){if(c.key==="Escape"){z();return}if(a&&c.key==="Enter"){c.preventDefault();return}u>=0&&(c.key==="Enter"?(Z(),c.preventDefault()):c.key==="ArrowDown"?u<i.length-1&&(A(u+1),c.preventDefault()):c.key==="ArrowUp"&&u>0&&(A(u-1),c.preventDefault()))}Oe(()=>{clearTimeout(O),d&&d.terminate()});function Se(){f=this.value,s(1,f)}function De(c){Ne[c?"unshift":"push"](()=>{h=c,s(6,h)})}const Ce=c=>A(c),Me=(c,F)=>F.button===0&&Y(c[0]);return e.$$set=c=>{"answers"in c&&s(14,g=c.answers),"disabled"in c&&s(0,q=c.disabled)},e.$$.update=()=>{if(e.$$.dirty&2&&s(1,f=f.toLowerCase()),e.$$.dirty&458754&&s(4,n=f!==p&&!_&&f.length>=B),e.$$.dirty&48&&s(3,a=n&&i.length===0),e.$$.dirty&24&&(o=n&&!a),e.$$.dirty&65575&&s(7,r=f&&!q&&(f===p||u===0&&f.trim()===i[0][0])),e.$$.dirty&557058)e:{if(!d)break e;clearTimeout(O),s(19,O=setTimeout(()=>{d.postMessage({guess:f})},ut))}},[q,f,u,a,n,i,h,r,w,Z,A,Y,z,Ae,g,d,p,_,B,O,Se,De,Ce,Me]}class qt extends Fe{constructor(t){super(),Ve(this,t,ft,ct,Ge,{answers:14,disabled:0})}}export{qt as G,wt as a,M as b,_t as c,ce as d,ae as e,$e as f,bt as g,gt as h,st as i,yt as s};
